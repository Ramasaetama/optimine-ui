{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://optimine-ui/./src/config.js","webpack://optimine-ui/./src/scripts/utils/translations.js","webpack://optimine-ui/./src/scripts/utils/LanguageManager.js","webpack://optimine-ui/./src/scripts/utils/index.js","webpack://optimine-ui/./src/scripts/pages/home/home-page.js","webpack://optimine-ui/./src/scripts/pages/about/about-page.js","webpack://optimine-ui/./src/scripts/data/api.js","webpack://optimine-ui/./src/scripts/pages/ai-tools/ai-tools-page.js","webpack://optimine-ui/./src/scripts/routes/routes.js","webpack://optimine-ui/./src/scripts/app.js","webpack://optimine-ui/./src/index.js"],"sourcesContent":["/**\r\n * OptiMine SPA Configuration\r\n */\r\n\r\nexport const Config = {\r\n    // App Info\r\n    appName: 'OptiMine',\r\n    version: '1.0.0',\r\n    \r\n    // API Configuration\r\n    api: {\r\n        baseUrl: 'http://139.59.224.58:5000',\r\n        timeout: 10000\r\n    },\r\n    \r\n    // Routes Configuration\r\n    routes: {\r\n        default: 'home',\r\n        protected: ['profile'],\r\n        public: ['home', 'planning', 'ai-tools', 'dashboard', 'auth']\r\n    },\r\n    \r\n    // Transition Configuration\r\n    transition: {\r\n        duration: 400,\r\n        type: 'slide' // 'slide', 'fade', 'none'\r\n    },\r\n    \r\n    // Storage Keys\r\n    storage: {\r\n        theme: 'optimine-theme',\r\n        language: 'optimine-language',\r\n        user: 'optimine-user',\r\n        token: 'optimine-token',\r\n        isLoggedIn: 'optimine-logged-in'\r\n    },\r\n    \r\n    // Default Settings\r\n    defaults: {\r\n        theme: 'dark',\r\n        language: 'id'\r\n    }\r\n};\r\n","/**\r\n * OptiMine SPA - Translations / i18n\r\n * Dual Language Support: English (en) & Indonesian (id)\r\n */\r\n\r\nexport const translations = {\r\n    en: {\r\n        // Navbar\r\n        nav: {\r\n            home: 'Home',\r\n            planning: 'Planning',\r\n            aiTools: 'AI Tools',\r\n            dashboard: 'Dashboard',\r\n            login: 'Login',\r\n            profile: 'Profile',\r\n            logout: 'Sign Out'\r\n        },\r\n        \r\n        // Home Page\r\n        home: {\r\n            welcomeBack: 'Welcome Back',\r\n            subtitle: 'Mining Value Chain Optimization',\r\n            activeSites: 'Active Sites',\r\n            fleetUnits: 'Fleet Units',\r\n            efficiency: 'Efficiency',\r\n            quickAccess: 'QUICK ACCESS',\r\n            aiScenario: 'AI Scenario Simulator',\r\n            aiScenarioDesc: 'Simulate various operational scenarios and generate optimized production & distribution recommendations based on real-time field conditions.',\r\n            aiChatbot: 'AI Assistant Chatbot',\r\n            aiChatbotDesc: 'Interactive Q&A chatbot for field conditions, operational queries, and AI-powered recommendations with contextual responses.',\r\n            opsDashboard: 'Operations Dashboard',\r\n            opsDashboardDesc: 'Comprehensive data visualization with real-time monitoring, analytics, and justification for every AI recommendation.',\r\n            accessDashboard: 'Access Dashboard',\r\n            aiPoweredAnalysis: 'AI-Powered Analysis',\r\n            realtimeMonitoring: 'Real-time Monitoring',\r\n            riskMitigation: 'Risk Mitigation',\r\n            costOptimization: 'Cost Optimization'\r\n        },\r\n        \r\n        // Planning Page\r\n        planning: {\r\n            title: 'Production Planning',\r\n            subtitle: 'Input operational conditions to generate optimized plans',\r\n            weatherConditions: 'Weather Conditions',\r\n            rainfallLevel: 'Rainfall Level',\r\n            low: 'Low',\r\n            high: 'High',\r\n            waveHeight: 'Wave Height',\r\n            calm: 'Calm',\r\n            rough: 'Rough',\r\n            fleetStatus: 'Fleet Status',\r\n            activeVehicles: 'Active Vehicles',\r\n            maintenanceStatus: 'Maintenance Status',\r\n            fleetAvailability: 'Fleet Availability',\r\n            truckCount: 'Truck Count',\r\n            excavatorCount: 'Excavator Count',\r\n            shipSchedule: 'Ship Schedule',\r\n            vesselName: 'Vessel Name',\r\n            estimatedArrival: 'Estimated Arrival',\r\n            cargoCapacity: 'Cargo Capacity (tons)',\r\n            addVessel: 'Add Vessel',\r\n            generatePlan: 'Generate Optimization Plan',\r\n            systemStatus: 'System Status',\r\n            aiSystemOnline: 'AI System Online',\r\n            n8nReady: 'n8n Integration Ready',\r\n            activeAlerts: 'Active Alerts',\r\n            alertRainfall: 'High rainfall expected at Mine Site B',\r\n            alertMaintenance: '2 vehicles scheduled for maintenance',\r\n            weatherData: 'Weather Data',\r\n            connected: 'Connected',\r\n            fleetTracking: 'Fleet Tracking',\r\n            online: 'Online',\r\n            aiEngine: 'AI Engine',\r\n            ready: 'Ready',\r\n            lastUpdate: 'Last Updated',\r\n            justNow: 'Just now',\r\n            active: 'Active'\r\n        },\r\n        \r\n        // AI Tools Page\r\n        aiTools: {\r\n            title: 'AI Assistant',\r\n            subtitle: 'Ask questions about field conditions and get AI recommendations',\r\n            aiOnline: 'AI Online',\r\n            responseTime: 'Response time',\r\n            suggestedPrompts: 'Suggested Prompts',\r\n            prompt1: 'What is the impact of current rainfall on mining operations?',\r\n            prompt2: 'Recommend optimal fleet allocation for today',\r\n            prompt3: 'Analyze shipping delays due to high waves',\r\n            integration: 'Integration',\r\n            integrationDesc: 'Ready for n8n workflow integration and Lovable AI connection',\r\n            connectedSystems: 'Connected Systems',\r\n            weather: 'Weather',\r\n            fleet: 'Fleet',\r\n            shipping: 'Shipping',\r\n            placeholder: 'Ask about weather impact, fleet optimization, or production planning...',\r\n            greeting: \"Hello! I'm your AI Mining Operations Assistant. How can I help you optimize your operations today?\"\r\n        },\r\n        \r\n        // Dashboard Page\r\n        dashboard: {\r\n            title: 'Operations Dashboard',\r\n            subtitle: 'Real-time monitoring and analytics',\r\n            totalProduction: 'Total Production',\r\n            fromLastMonth: 'from last month',\r\n            activeEquipment: 'Active Equipment',\r\n            outOfTotal: 'out of 48 total units',\r\n            efficiencyRate: 'Efficiency Rate',\r\n            target: 'Target',\r\n            costSavings: 'Cost Savings',\r\n            thisQuarter: 'This quarter',\r\n            productionTrends: 'Production Trends',\r\n            equipmentStatus: 'Equipment Status',\r\n            chartPlaceholder: 'Chart visualization here',\r\n            statusPlaceholder: 'Status overview here'\r\n        },\r\n        \r\n        // Auth Page\r\n        auth: {\r\n            login: 'Login',\r\n            register: 'Register',\r\n            email: 'Email',\r\n            password: 'Password',\r\n            confirmPassword: 'Confirm Password',\r\n            fullName: 'Full Name',\r\n            role: 'Role',\r\n            forgotPassword: 'Forgot Password?',\r\n            signIn: 'Sign In',\r\n            createAccount: 'Create Account',\r\n            resetPassword: 'Reset Password',\r\n            resetDesc: \"Enter your email address and we'll send you a link to reset your password.\",\r\n            sendResetLink: 'Send Reset Link',\r\n            backToLogin: 'Back to Login',\r\n            miningPlanner: 'Mining Planner',\r\n            shippingPlanner: 'Shipping Planner',\r\n            // Password strength\r\n            passwordRequirements: 'Password Requirements:',\r\n            minLength: 'Minimum 6 characters',\r\n            uppercase: 'Uppercase letter (A-Z)',\r\n            number: 'Number (0-9)',\r\n            weak: 'Weak',\r\n            medium: 'Medium',\r\n            fair: 'Fair',\r\n            strong: 'Strong',\r\n            passwordError: 'Password must be at least 6 characters, contain uppercase letter and number!',\r\n            passwordMismatch: 'Passwords do not match!'\r\n        },\r\n        \r\n        // Profile Page\r\n        profile: {\r\n            title: 'Profile Settings',\r\n            subtitle: 'Manage your account preferences',\r\n            accountInfo: 'Account Information',\r\n            displayName: 'Display Name',\r\n            email: 'Email',\r\n            preferences: 'Preferences',\r\n            darkMode: 'Dark Mode',\r\n            useDarkTheme: 'Use dark theme',\r\n            language: 'Language',\r\n            selectLanguage: 'Select your language',\r\n            signOut: 'Sign Out',\r\n            theme: 'Theme',\r\n            dark: 'Dark',\r\n            light: 'Light'\r\n        },\r\n        \r\n        // Common\r\n        common: {\r\n            loading: 'Loading...',\r\n            error: 'Error',\r\n            success: 'Success',\r\n            save: 'Save',\r\n            cancel: 'Cancel',\r\n            confirm: 'Confirm',\r\n            delete: 'Delete',\r\n            edit: 'Edit',\r\n            view: 'View',\r\n            search: 'Search',\r\n            noData: 'No data available',\r\n            languageChanged: 'Language changed to English',\r\n            copyright: 'Â© 2025 OptiMine. All rights reserved.',\r\n            privacy: 'Privacy',\r\n            terms: 'Terms',\r\n            contact: 'Contact'\r\n        }\r\n    },\r\n    \r\n    id: {\r\n        // Navbar\r\n        nav: {\r\n            home: 'Beranda',\r\n            planning: 'Perencanaan',\r\n            aiTools: 'AI Tools',\r\n            dashboard: 'Dashboard',\r\n            login: 'Masuk',\r\n            profile: 'Profil',\r\n            logout: 'Keluar'\r\n        },\r\n        \r\n        // Home Page\r\n        home: {\r\n            welcomeBack: 'Selamat Datang',\r\n            subtitle: 'Optimasi Rantai Nilai Pertambangan',\r\n            activeSites: 'Lokasi Aktif',\r\n            fleetUnits: 'Unit Armada',\r\n            efficiency: 'Efisiensi',\r\n            quickAccess: 'AKSES CEPAT',\r\n            aiScenario: 'Simulator Skenario AI',\r\n            aiScenarioDesc: 'Simulasikan berbagai skenario operasional dan hasilkan rekomendasi produksi & distribusi yang dioptimalkan berdasarkan kondisi lapangan real-time.',\r\n            aiChatbot: 'Chatbot Asisten AI',\r\n            aiChatbotDesc: 'Chatbot Q&A interaktif untuk kondisi lapangan, pertanyaan operasional, dan rekomendasi bertenaga AI dengan respons kontekstual.',\r\n            opsDashboard: 'Dashboard Operasi',\r\n            opsDashboardDesc: 'Visualisasi data komprehensif dengan pemantauan real-time, analitik, dan justifikasi untuk setiap rekomendasi AI.',\r\n            accessDashboard: 'Akses Dashboard',\r\n            aiPoweredAnalysis: 'Analisis Bertenaga AI',\r\n            realtimeMonitoring: 'Pemantauan Real-time',\r\n            riskMitigation: 'Mitigasi Risiko',\r\n            costOptimization: 'Optimasi Biaya'\r\n        },\r\n        \r\n        // Planning Page\r\n        planning: {\r\n            title: 'Perencanaan Produksi',\r\n            subtitle: 'Masukkan kondisi operasional untuk menghasilkan rencana yang dioptimalkan',\r\n            weatherConditions: 'Kondisi Cuaca',\r\n            rainfallLevel: 'Tingkat Curah Hujan',\r\n            low: 'Rendah',\r\n            high: 'Tinggi',\r\n            waveHeight: 'Tinggi Gelombang',\r\n            calm: 'Tenang',\r\n            rough: 'Bergelombang',\r\n            fleetStatus: 'Status Armada',\r\n            activeVehicles: 'Kendaraan Aktif',\r\n            maintenanceStatus: 'Status Perawatan',\r\n            fleetAvailability: 'Ketersediaan Armada',\r\n            truckCount: 'Jumlah Truk',\r\n            excavatorCount: 'Jumlah Excavator',\r\n            shipSchedule: 'Jadwal Kapal',\r\n            vesselName: 'Nama Kapal',\r\n            estimatedArrival: 'Perkiraan Kedatangan',\r\n            cargoCapacity: 'Kapasitas Kargo (ton)',\r\n            addVessel: 'Tambah Kapal',\r\n            generatePlan: 'Hasilkan Rencana Optimal',\r\n            systemStatus: 'Status Sistem',\r\n            aiSystemOnline: 'Sistem AI Online',\r\n            n8nReady: 'Integrasi n8n Siap',\r\n            activeAlerts: 'Peringatan Aktif',\r\n            alertRainfall: 'Curah hujan tinggi diperkirakan di Lokasi Tambang B',\r\n            alertMaintenance: '2 kendaraan dijadwalkan untuk perawatan',\r\n            weatherData: 'Data Cuaca',\r\n            connected: 'Terhubung',\r\n            fleetTracking: 'Pelacakan Armada',\r\n            online: 'Online',\r\n            aiEngine: 'Mesin AI',\r\n            ready: 'Siap',\r\n            lastUpdate: 'Terakhir Diperbarui',\r\n            justNow: 'Baru saja',\r\n            active: 'Aktif'\r\n        },\r\n        \r\n        // AI Tools Page\r\n        aiTools: {\r\n            title: 'Asisten AI',\r\n            subtitle: 'Ajukan pertanyaan tentang kondisi lapangan dan dapatkan rekomendasi AI',\r\n            aiOnline: 'AI Online',\r\n            responseTime: 'Waktu respons',\r\n            suggestedPrompts: 'Prompt Disarankan',\r\n            prompt1: 'Apa dampak curah hujan saat ini terhadap operasi tambang?',\r\n            prompt2: 'Rekomendasikan alokasi armada optimal untuk hari ini',\r\n            prompt3: 'Analisis keterlambatan pengiriman akibat gelombang tinggi',\r\n            integration: 'Integrasi',\r\n            integrationDesc: 'Siap untuk integrasi alur kerja n8n dan koneksi Lovable AI',\r\n            connectedSystems: 'Sistem Terhubung',\r\n            weather: 'Cuaca',\r\n            fleet: 'Armada',\r\n            shipping: 'Pengiriman',\r\n            placeholder: 'Tanyakan tentang dampak cuaca, optimasi armada, atau perencanaan produksi...',\r\n            greeting: 'Halo! Saya Asisten AI Operasi Tambang Anda. Bagaimana saya bisa membantu mengoptimalkan operasi Anda hari ini?'\r\n        },\r\n        \r\n        // Dashboard Page\r\n        dashboard: {\r\n            title: 'Dashboard Operasi',\r\n            subtitle: 'Pemantauan dan analitik real-time',\r\n            totalProduction: 'Total Produksi',\r\n            fromLastMonth: 'dari bulan lalu',\r\n            activeEquipment: 'Peralatan Aktif',\r\n            outOfTotal: 'dari 48 unit total',\r\n            efficiencyRate: 'Tingkat Efisiensi',\r\n            target: 'Target',\r\n            costSavings: 'Penghematan Biaya',\r\n            thisQuarter: 'Kuartal ini',\r\n            productionTrends: 'Tren Produksi',\r\n            equipmentStatus: 'Status Peralatan',\r\n            chartPlaceholder: 'Visualisasi grafik di sini',\r\n            statusPlaceholder: 'Ringkasan status di sini'\r\n        },\r\n        \r\n        // Auth Page\r\n        auth: {\r\n            login: 'Masuk',\r\n            register: 'Daftar',\r\n            email: 'Email',\r\n            password: 'Kata Sandi',\r\n            confirmPassword: 'Konfirmasi Kata Sandi',\r\n            fullName: 'Nama Lengkap',\r\n            role: 'Peran',\r\n            forgotPassword: 'Lupa Kata Sandi?',\r\n            signIn: 'Masuk',\r\n            createAccount: 'Buat Akun',\r\n            resetPassword: 'Reset Kata Sandi',\r\n            resetDesc: 'Masukkan alamat email Anda dan kami akan mengirimkan link untuk mereset kata sandi.',\r\n            sendResetLink: 'Kirim Link Reset',\r\n            backToLogin: 'Kembali ke Login',\r\n            miningPlanner: 'Perencana Tambang',\r\n            shippingPlanner: 'Perencana Pengiriman',\r\n            // Password strength\r\n            passwordRequirements: 'Persyaratan Password:',\r\n            minLength: 'Minimal 6 karakter',\r\n            uppercase: 'Huruf kapital (A-Z)',\r\n            number: 'Angka (0-9)',\r\n            weak: 'Lemah',\r\n            medium: 'Sedang',\r\n            fair: 'Cukup Kuat',\r\n            strong: 'Kuat',\r\n            passwordError: 'Password harus minimal 6 karakter, mengandung huruf kapital dan angka!',\r\n            passwordMismatch: 'Password tidak cocok!'\r\n        },\r\n        \r\n        // Profile Page\r\n        profile: {\r\n            title: 'Pengaturan Profil',\r\n            subtitle: 'Kelola preferensi akun Anda',\r\n            accountInfo: 'Informasi Akun',\r\n            displayName: 'Nama Tampilan',\r\n            email: 'Email',\r\n            preferences: 'Preferensi',\r\n            darkMode: 'Mode Gelap',\r\n            useDarkTheme: 'Gunakan tema gelap',\r\n            language: 'Bahasa',\r\n            selectLanguage: 'Pilih bahasa Anda',\r\n            signOut: 'Keluar',\r\n            theme: 'Tema',\r\n            dark: 'Gelap',\r\n            light: 'Terang'\r\n        },\r\n        \r\n        // Common\r\n        common: {\r\n            loading: 'Memuat...',\r\n            error: 'Kesalahan',\r\n            success: 'Berhasil',\r\n            save: 'Simpan',\r\n            cancel: 'Batal',\r\n            confirm: 'Konfirmasi',\r\n            delete: 'Hapus',\r\n            edit: 'Edit',\r\n            view: 'Lihat',\r\n            search: 'Cari',\r\n            noData: 'Tidak ada data',\r\n            languageChanged: 'Bahasa diubah ke Indonesia',\r\n            copyright: 'Â© 2025 OptiMine. Hak cipta dilindungi.',\r\n            privacy: 'Privasi',\r\n            terms: 'Ketentuan',\r\n            contact: 'Kontak'\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Get translation by key path\r\n * @param {string} lang - Language code ('en' or 'id')\r\n * @param {string} path - Dot notation path (e.g., 'nav.home', 'home.welcomeBack')\r\n * @returns {string} - Translated string or key if not found\r\n */\r\nexport const t = (lang, path) => {\r\n    const keys = path.split('.');\r\n    let result = translations[lang] || translations['en'];\r\n    \r\n    for (const key of keys) {\r\n        if (result && typeof result === 'object' && key in result) {\r\n            result = result[key];\r\n        } else {\r\n            console.warn(`Translation not found: ${path} for language: ${lang}`);\r\n            return path; // Return the key if translation not found\r\n        }\r\n    }\r\n    \r\n    return result;\r\n};\r\n\r\n/**\r\n * Get all translations for a section\r\n * @param {string} lang - Language code\r\n * @param {string} section - Section name (e.g., 'nav', 'home')\r\n * @returns {object} - All translations for that section\r\n */\r\nexport const getSection = (lang, section) => {\r\n    return translations[lang]?.[section] || translations['en']?.[section] || {};\r\n};\r\n\r\nexport default translations;\r\n","/**\r\n * LanguageManager - Handles multi-language functionality\r\n * Uses localStorage for persistence\r\n * Supports dynamic DOM updates via data-i18n attributes\r\n */\r\n\r\nimport { translations } from './translations.js';\r\n\r\nclass LanguageManager {\r\n    constructor() {\r\n        this.currentLanguage = this.getSavedLanguage();\r\n        this.listeners = [];\r\n        this.isInitialized = false;\r\n    }\r\n\r\n    /**\r\n     * Get saved language from localStorage or default to 'id'\r\n     */\r\n    getSavedLanguage() {\r\n        const saved = localStorage.getItem('optimine-language');\r\n        if (saved && (saved === 'en' || saved === 'id')) {\r\n            return saved;\r\n        }\r\n        // Detect browser language\r\n        const browserLang = navigator.language.toLowerCase();\r\n        if (browserLang.startsWith('id')) {\r\n            return 'id';\r\n        }\r\n        return 'id'; // Default to Indonesian\r\n    }\r\n\r\n    /**\r\n     * Initialize language manager\r\n     */\r\n    init() {\r\n        if (this.isInitialized) return this;\r\n        \r\n        this.setLanguage(this.currentLanguage, false); // Don't notify on init\r\n        this.setupLanguageSwitcher();\r\n        this.isInitialized = true;\r\n        \r\n        console.log('LanguageManager initialized. Current language:', this.currentLanguage);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Get current translations object\r\n     */\r\n    get t() {\r\n        return translations[this.currentLanguage] || translations['id'];\r\n    }\r\n\r\n    /**\r\n     * Get specific translation by dot notation path\r\n     * @param {string} path - e.g., 'nav.home', 'features.simulator.title'\r\n     * @returns {string} Translation or path if not found\r\n     */\r\n    translate(path) {\r\n        const keys = path.split('.');\r\n        let result = this.t;\r\n        \r\n        for (const key of keys) {\r\n            if (result && result[key] !== undefined) {\r\n                result = result[key];\r\n            } else {\r\n                console.warn(`Translation not found: ${path}`);\r\n                return path;\r\n            }\r\n        }\r\n        \r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Set language and update all elements\r\n     * @param {string} lang - 'en' or 'id'\r\n     * @param {boolean} notify - Whether to notify listeners (default: true)\r\n     */\r\n    setLanguage(lang, notify = true) {\r\n        if (lang !== 'en' && lang !== 'id') {\r\n            console.error('Invalid language:', lang);\r\n            return;\r\n        }\r\n\r\n        this.currentLanguage = lang;\r\n        localStorage.setItem('optimine-language', lang);\r\n        \r\n        // Update document language attribute\r\n        document.documentElement.setAttribute('lang', lang);\r\n        \r\n        // Update all elements with data-i18n attribute\r\n        this.updateAllTranslations();\r\n        \r\n        // Update language indicator\r\n        this.updateLanguageIndicator();\r\n        \r\n        // Notify listeners\r\n        if (notify) {\r\n            this.notifyListeners();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle between languages\r\n     */\r\n    toggleLanguage() {\r\n        const newLang = this.currentLanguage === 'en' ? 'id' : 'en';\r\n        this.setLanguage(newLang);\r\n        return newLang;\r\n    }\r\n\r\n    /**\r\n     * Update all DOM elements with data-i18n attribute\r\n     */\r\n    updateAllTranslations() {\r\n        // Elements with text content\r\n        const textElements = document.querySelectorAll('[data-i18n]');\r\n        textElements.forEach(element => {\r\n            const key = element.getAttribute('data-i18n');\r\n            const translation = this.translate(key);\r\n            if (translation !== key) {\r\n                element.textContent = translation;\r\n            }\r\n        });\r\n\r\n        // Elements with placeholder\r\n        const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');\r\n        placeholderElements.forEach(element => {\r\n            const key = element.getAttribute('data-i18n-placeholder');\r\n            const translation = this.translate(key);\r\n            if (translation !== key) {\r\n                element.setAttribute('placeholder', translation);\r\n            }\r\n        });\r\n\r\n        // Elements with title attribute\r\n        const titleElements = document.querySelectorAll('[data-i18n-title]');\r\n        titleElements.forEach(element => {\r\n            const key = element.getAttribute('data-i18n-title');\r\n            const translation = this.translate(key);\r\n            if (translation !== key) {\r\n                element.setAttribute('title', translation);\r\n            }\r\n        });\r\n\r\n        // Elements with aria-label\r\n        const ariaElements = document.querySelectorAll('[data-i18n-aria]');\r\n        ariaElements.forEach(element => {\r\n            const key = element.getAttribute('data-i18n-aria');\r\n            const translation = this.translate(key);\r\n            if (translation !== key) {\r\n                element.setAttribute('aria-label', translation);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update language indicator in UI\r\n     */\r\n    updateLanguageIndicator() {\r\n        // Update text indicators\r\n        const indicators = document.querySelectorAll('[data-language-indicator]');\r\n        indicators.forEach(indicator => {\r\n            indicator.textContent = this.currentLanguage.toUpperCase();\r\n        });\r\n\r\n        // Update active state on language buttons\r\n        const langButtons = document.querySelectorAll('[data-lang-button]');\r\n        langButtons.forEach(button => {\r\n            const lang = button.getAttribute('data-lang-button');\r\n            const isActive = lang === this.currentLanguage;\r\n            \r\n            // Toggle classes\r\n            button.classList.toggle('bg-primary', isActive);\r\n            button.classList.toggle('text-primary-foreground', isActive);\r\n            button.classList.toggle('shadow-lg', isActive);\r\n        });\r\n        \r\n        // Update .lang-option buttons (legacy support)\r\n        document.querySelectorAll('.lang-option').forEach(btn => {\r\n            const lang = btn.dataset.lang;\r\n            const isActive = lang === this.currentLanguage;\r\n            \r\n            btn.classList.toggle('bg-primary', isActive);\r\n            btn.classList.toggle('text-primary-foreground', isActive);\r\n            btn.classList.toggle('shadow-lg', isActive);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Setup language switcher click handlers\r\n     */\r\n    setupLanguageSwitcher() {\r\n        // Use event delegation for language buttons\r\n        document.addEventListener('click', (e) => {\r\n            // Language toggle button (toggles between en/id)\r\n            const toggleBtn = e.target.closest('[data-language-toggle]');\r\n            if (toggleBtn) {\r\n                e.preventDefault();\r\n                this.toggleLanguage();\r\n                return;\r\n            }\r\n\r\n            // Specific language button with data-lang-button\r\n            const langBtn = e.target.closest('[data-lang-button]');\r\n            if (langBtn) {\r\n                e.preventDefault();\r\n                const lang = langBtn.getAttribute('data-lang-button');\r\n                this.setLanguage(lang);\r\n                return;\r\n            }\r\n            \r\n            // Legacy .lang-option buttons\r\n            const langOption = e.target.closest('.lang-option');\r\n            if (langOption) {\r\n                e.preventDefault();\r\n                const lang = langOption.dataset.lang;\r\n                if (lang) {\r\n                    this.setLanguage(lang);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Subscribe to language changes\r\n     * @param {Function} callback - Called when language changes with (lang, translations)\r\n     * @returns {Function} Unsubscribe function\r\n     */\r\n    subscribe(callback) {\r\n        this.listeners.push(callback);\r\n        return () => {\r\n            this.listeners = this.listeners.filter(cb => cb !== callback);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Notify all subscribers of language change\r\n     */\r\n    notifyListeners() {\r\n        this.listeners.forEach(callback => {\r\n            try {\r\n                callback(this.currentLanguage, this.t);\r\n            } catch (error) {\r\n                console.error('Language listener error:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get translation for use in templates\r\n     * Shorthand for translate()\r\n     */\r\n    $(path) {\r\n        return this.translate(path);\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nconst languageManager = new LanguageManager();\r\n\r\nexport { languageManager, LanguageManager };\r\nexport default languageManager;\r\n","/**\r\n * OptiMine SPA - Utilities\r\n * Common utility functions\r\n */\r\n\r\n// ============================================\r\n// EVENT BUS - Pub/Sub Pattern\r\n// ============================================\r\nexport const EventBus = {\r\n    events: {},\r\n\r\n    on(event, callback) {\r\n        if (!this.events[event]) {\r\n            this.events[event] = [];\r\n        }\r\n        this.events[event].push(callback);\r\n        return () => this.off(event, callback);\r\n    },\r\n\r\n    off(event, callback) {\r\n        if (!this.events[event]) return;\r\n        this.events[event] = this.events[event].filter(cb => cb !== callback);\r\n    },\r\n\r\n    emit(event, data) {\r\n        if (!this.events[event]) return;\r\n        this.events[event].forEach(callback => callback(data));\r\n    },\r\n\r\n    once(event, callback) {\r\n        const wrapper = (data) => {\r\n            callback(data);\r\n            this.off(event, wrapper);\r\n        };\r\n        this.on(event, wrapper);\r\n    }\r\n};\r\n\r\n// ============================================\r\n// DOM HELPERS\r\n// ============================================\r\nexport const $ = (selector) => document.querySelector(selector);\r\nexport const $$ = (selector) => document.querySelectorAll(selector);\r\n\r\nexport const createElement = (tag, attributes = {}, children = []) => {\r\n    const element = document.createElement(tag);\r\n    \r\n    Object.entries(attributes).forEach(([key, value]) => {\r\n        if (key === 'className') {\r\n            element.className = value;\r\n        } else if (key === 'innerHTML') {\r\n            element.innerHTML = value;\r\n        } else if (key.startsWith('on')) {\r\n            element.addEventListener(key.slice(2).toLowerCase(), value);\r\n        } else {\r\n            element.setAttribute(key, value);\r\n        }\r\n    });\r\n    \r\n    children.forEach(child => {\r\n        if (typeof child === 'string') {\r\n            element.appendChild(document.createTextNode(child));\r\n        } else {\r\n            element.appendChild(child);\r\n        }\r\n    });\r\n    \r\n    return element;\r\n};\r\n\r\n// ============================================\r\n// STORAGE HELPERS\r\n// ============================================\r\nexport const Storage = {\r\n    get(key, defaultValue = null) {\r\n        try {\r\n            const value = localStorage.getItem(key);\r\n            return value ? JSON.parse(value) : defaultValue;\r\n        } catch {\r\n            return localStorage.getItem(key) || defaultValue;\r\n        }\r\n    },\r\n\r\n    set(key, value) {\r\n        try {\r\n            localStorage.setItem(key, typeof value === 'string' ? value : JSON.stringify(value));\r\n        } catch (e) {\r\n            console.error('Storage error:', e);\r\n        }\r\n    },\r\n\r\n    remove(key) {\r\n        localStorage.removeItem(key);\r\n    },\r\n\r\n    clear() {\r\n        localStorage.clear();\r\n    }\r\n};\r\n\r\n// ============================================\r\n// DEBOUNCE & THROTTLE\r\n// ============================================\r\nexport const debounce = (func, wait) => {\r\n    let timeout;\r\n    return function executedFunction(...args) {\r\n        const later = () => {\r\n            clearTimeout(timeout);\r\n            func(...args);\r\n        };\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n    };\r\n};\r\n\r\nexport const throttle = (func, limit) => {\r\n    let inThrottle;\r\n    return function executedFunction(...args) {\r\n        if (!inThrottle) {\r\n            func(...args);\r\n            inThrottle = true;\r\n            setTimeout(() => inThrottle = false, limit);\r\n        }\r\n    };\r\n};\r\n\r\n// ============================================\r\n// FORMAT HELPERS\r\n// ============================================\r\nexport const formatNumber = (num) => {\r\n    return new Intl.NumberFormat('id-ID').format(num);\r\n};\r\n\r\nexport const formatCurrency = (num, currency = 'IDR') => {\r\n    return new Intl.NumberFormat('id-ID', {\r\n        style: 'currency',\r\n        currency: currency\r\n    }).format(num);\r\n};\r\n\r\nexport const formatDate = (date, options = {}) => {\r\n    return new Intl.DateTimeFormat('id-ID', options).format(new Date(date));\r\n};\r\n\r\n// ============================================\r\n// ANIMATION HELPERS\r\n// ============================================\r\nexport const animate = {\r\n    fadeIn(element, duration = 300) {\r\n        element.style.opacity = '0';\r\n        element.style.display = 'block';\r\n        \r\n        let start = null;\r\n        const step = (timestamp) => {\r\n            if (!start) start = timestamp;\r\n            const progress = Math.min((timestamp - start) / duration, 1);\r\n            element.style.opacity = progress;\r\n            if (progress < 1) {\r\n                requestAnimationFrame(step);\r\n            }\r\n        };\r\n        requestAnimationFrame(step);\r\n    },\r\n\r\n    fadeOut(element, duration = 300) {\r\n        let start = null;\r\n        const step = (timestamp) => {\r\n            if (!start) start = timestamp;\r\n            const progress = Math.min((timestamp - start) / duration, 1);\r\n            element.style.opacity = 1 - progress;\r\n            if (progress < 1) {\r\n                requestAnimationFrame(step);\r\n            } else {\r\n                element.style.display = 'none';\r\n            }\r\n        };\r\n        requestAnimationFrame(step);\r\n    },\r\n\r\n    slideDown(element, duration = 300) {\r\n        element.style.height = '0px';\r\n        element.style.overflow = 'hidden';\r\n        element.style.display = 'block';\r\n        \r\n        const targetHeight = element.scrollHeight;\r\n        let start = null;\r\n        \r\n        const step = (timestamp) => {\r\n            if (!start) start = timestamp;\r\n            const progress = Math.min((timestamp - start) / duration, 1);\r\n            element.style.height = `${targetHeight * progress}px`;\r\n            if (progress < 1) {\r\n                requestAnimationFrame(step);\r\n            } else {\r\n                element.style.height = '';\r\n                element.style.overflow = '';\r\n            }\r\n        };\r\n        requestAnimationFrame(step);\r\n    },\r\n\r\n    slideUp(element, duration = 300) {\r\n        const startHeight = element.scrollHeight;\r\n        element.style.height = `${startHeight}px`;\r\n        element.style.overflow = 'hidden';\r\n        \r\n        let start = null;\r\n        \r\n        const step = (timestamp) => {\r\n            if (!start) start = timestamp;\r\n            const progress = Math.min((timestamp - start) / duration, 1);\r\n            element.style.height = `${startHeight * (1 - progress)}px`;\r\n            if (progress < 1) {\r\n                requestAnimationFrame(step);\r\n            } else {\r\n                element.style.display = 'none';\r\n                element.style.height = '';\r\n                element.style.overflow = '';\r\n            }\r\n        };\r\n        requestAnimationFrame(step);\r\n    },\r\n\r\n    // Typewriter Effect\r\n    typewriter(element, text, speed = 100, callback = null) {\r\n        element.textContent = '';\r\n        element.style.borderRight = '2px solid currentColor';\r\n        element.style.animation = 'blink-caret 0.75s step-end infinite';\r\n        \r\n        let index = 0;\r\n        \r\n        const type = () => {\r\n            if (index < text.length) {\r\n                element.textContent += text.charAt(index);\r\n                index++;\r\n                setTimeout(type, speed);\r\n            } else {\r\n                setTimeout(() => {\r\n                    element.style.borderRight = 'none';\r\n                    element.style.animation = 'none';\r\n                    if (callback) callback();\r\n                }, 500);\r\n            }\r\n        };\r\n        \r\n        type();\r\n    },\r\n\r\n    // Typewriter with welcome message and username\r\n    typewriterWelcome(element, welcomeText, userName, speed = 80) {\r\n        element.innerHTML = '';\r\n        \r\n        const welcomeSpan = document.createElement('span');\r\n        welcomeSpan.className = 'typewriter-welcome';\r\n        \r\n        const userSpan = document.createElement('span');\r\n        userSpan.className = 'typewriter-username text-primary';\r\n        \r\n        element.appendChild(welcomeSpan);\r\n        element.appendChild(userSpan);\r\n        \r\n        element.classList.add('typewriter-active');\r\n        \r\n        let welcomeIndex = 0;\r\n        let userIndex = 0;\r\n        \r\n        const typeWelcome = () => {\r\n            if (welcomeIndex < welcomeText.length) {\r\n                welcomeSpan.textContent += welcomeText.charAt(welcomeIndex);\r\n                welcomeIndex++;\r\n                setTimeout(typeWelcome, speed);\r\n            } else {\r\n                setTimeout(typeUser, 200);\r\n            }\r\n        };\r\n        \r\n        const typeUser = () => {\r\n            if (userIndex < userName.length) {\r\n                userSpan.textContent += userName.charAt(userIndex);\r\n                userIndex++;\r\n                setTimeout(typeUser, speed);\r\n            } else {\r\n                setTimeout(() => {\r\n                    element.classList.remove('typewriter-active');\r\n                    element.classList.add('typewriter-complete');\r\n                }, 500);\r\n            }\r\n        };\r\n        \r\n        setTimeout(typeWelcome, 300);\r\n    },\r\n\r\n    // Counter Animation - Count up from 0 to target number\r\n    countUp(element, target, duration = 2000, suffix = '') {\r\n        const startTime = performance.now();\r\n        const startValue = 0;\r\n        \r\n        // Easing function for smooth animation\r\n        const easeOutQuart = (t) => 1 - Math.pow(1 - t, 4);\r\n        \r\n        const updateCount = (currentTime) => {\r\n            const elapsed = currentTime - startTime;\r\n            const progress = Math.min(elapsed / duration, 1);\r\n            const easedProgress = easeOutQuart(progress);\r\n            \r\n            const currentValue = Math.floor(startValue + (target - startValue) * easedProgress);\r\n            element.textContent = currentValue + suffix;\r\n            \r\n            if (progress < 1) {\r\n                requestAnimationFrame(updateCount);\r\n            } else {\r\n                element.textContent = target + suffix;\r\n                element.classList.add('complete');\r\n            }\r\n        };\r\n        \r\n        requestAnimationFrame(updateCount);\r\n    },\r\n\r\n    // Initialize all stat counters on page\r\n    initStatCounters(delay = 800) {\r\n        setTimeout(() => {\r\n            const statElements = document.querySelectorAll('.stat-value[data-target]');\r\n            \r\n            statElements.forEach((element, index) => {\r\n                const target = parseInt(element.getAttribute('data-target')) || 0;\r\n                const suffix = element.getAttribute('data-suffix') || '';\r\n                const duration = parseInt(element.getAttribute('data-duration')) || 2000;\r\n                \r\n                // Set initial value to 0\r\n                element.textContent = '0' + suffix;\r\n                \r\n                // Stagger animation for each stat\r\n                setTimeout(() => {\r\n                    animate.countUp(element, target, duration, suffix);\r\n                }, index * 200);\r\n            });\r\n        }, delay);\r\n    }\r\n};\r\n\r\n// ============================================\r\n// DELAY HELPER\r\n// ============================================\r\nexport const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n// ============================================\r\n// LANGUAGE MANAGER\r\n// ============================================\r\nexport { default as LanguageManager } from './LanguageManager.js';\r\n","/**\r\n * OptiMine SPA - Home Page\r\n */\r\n\r\nimport { App } from '../../app.js';\r\nimport { t, getSection } from '../../utils/translations.js';\r\nimport { animate } from '../../utils/index.js';\r\n\r\n/**\r\n * Get user name from localStorage\r\n * @returns {string} User name or empty string\r\n */\r\nconst getUserName = () => {\r\n    try {\r\n        const userData = localStorage.getItem('optimine-user');\r\n        if (userData) {\r\n            const user = JSON.parse(userData);\r\n            return user.name || user.nama || '';\r\n        }\r\n    } catch (e) {\r\n        console.error('Error parsing user data:', e);\r\n    }\r\n    return '';\r\n};\r\n\r\n/**\r\n * Check if user is logged in\r\n */\r\nconst isLoggedIn = () => {\r\n    return localStorage.getItem('optimine-logged-in') === 'true';\r\n};\r\n\r\n/**\r\n * Initialize typewriter effect for welcome message\r\n */\r\nconst initTypewriter = () => {\r\n    const welcomeElement = document.getElementById('welcome-title');\r\n    if (!welcomeElement) return;\r\n    \r\n    const userName = getUserName();\r\n    \r\n    if (isLoggedIn() && userName) {\r\n        animate.typewriterWelcome(welcomeElement, 'Welcome Back, ', userName, 70);\r\n    } else {\r\n        animate.typewriterWelcome(welcomeElement, 'Welcome to ', 'OptiMine', 70);\r\n    }\r\n};\r\n\r\nconst template = () => {\r\n    const lang = App.Model.getState('language') || 'id';\r\n    const home = getSection(lang, 'home');\r\n    \r\n    return `\r\n<div class=\"min-h-[calc(100vh-4rem)] pt-6\">\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        \r\n        <!-- ========================================\r\n             WELCOME SECTION\r\n        ======================================== -->\r\n        <section class=\"mb-8 animate-fade-in stagger-1\">\r\n            <div class=\"glass border border-border rounded-2xl p-6 md:p-8 border-glow\">\r\n                <div class=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6\">\r\n                    <!-- Left: Title & Subtitle -->\r\n                    <div>\r\n                        <h1 id=\"welcome-title\" class=\"font-heading text-2xl md:text-3xl font-bold text-foreground mb-2 welcome-typewriter\">\r\n                            <!-- Typewriter effect will be inserted here -->\r\n                        </h1>\r\n                        <p class=\"text-muted-foreground\">\r\n                            ${home.subtitle}\r\n                        </p>\r\n                    </div>\r\n                    \r\n                    <!-- Right: Stats Cards -->\r\n                    <div class=\"flex flex-wrap gap-3 lg:gap-4\">\r\n                        <!-- Active Sites -->\r\n                        <div class=\"stat-card rounded-xl bg-secondary/50 border border-border px-5 py-3 text-center min-w-[100px]\">\r\n                            <p class=\"stat-value text-2xl lg:text-3xl font-bold text-primary\" data-target=\"24\" data-suffix=\"\" data-duration=\"2000\">0</p>\r\n                            <p class=\"text-xs text-muted-foreground uppercase tracking-wide\">${home.activeSites}</p>\r\n                        </div>\r\n                        <!-- Fleet Units -->\r\n                        <div class=\"stat-card rounded-xl bg-secondary/50 border border-border px-5 py-3 text-center min-w-[100px]\">\r\n                            <p class=\"stat-value text-2xl lg:text-3xl font-bold text-emerald-400\" data-target=\"156\" data-suffix=\"\" data-duration=\"2000\">0</p>\r\n                            <p class=\"text-xs text-muted-foreground uppercase tracking-wide\">${home.fleetUnits}</p>\r\n                        </div>\r\n                        <!-- Efficiency -->\r\n                        <div class=\"stat-card rounded-xl bg-secondary/50 border border-border px-5 py-3 text-center min-w-[100px]\">\r\n                            <p class=\"stat-value text-2xl lg:text-3xl font-bold text-orange-400\" data-target=\"98\" data-suffix=\"%\" data-duration=\"2000\">0%</p>\r\n                            <p class=\"text-xs text-muted-foreground uppercase tracking-wide\">${home.efficiency}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        <!-- ========================================\r\n             QUICK ACCESS SECTION\r\n        ======================================== -->\r\n        <section class=\"mb-8\">\r\n            <h2 class=\"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4\">\r\n                ${home.quickAccess}\r\n            </h2>\r\n            <div class=\"grid md:grid-cols-3 gap-4\">\r\n                \r\n                <!-- Card 1: AI Scenario Simulator -->\r\n                <a href=\"#planning\" class=\"glass border border-border rounded-xl p-6 hover:border-primary/30 hover:bg-card/80 transition-all duration-300 group animate-fade-in stagger-2\">\r\n                    <div class=\"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\r\n                        </svg>\r\n                    </div>\r\n                    <h3 class=\"font-semibold text-foreground mb-2\">${home.aiScenario}</h3>\r\n                    <p class=\"text-sm text-muted-foreground mb-4 leading-relaxed\">\r\n                        ${home.aiScenarioDesc}\r\n                    </p>\r\n                    <span class=\"text-primary text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all duration-300\">\r\n                        ${home.accessDashboard}\r\n                        <svg class=\"w-4 h-4 transition-transform duration-300 group-hover:translate-x-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\r\n                        </svg>\r\n                    </span>\r\n                </a>\r\n\r\n                <!-- Card 2: AI Assistant Chatbot -->\r\n                <a href=\"#ai-tools\" class=\"glass border border-border rounded-xl p-6 hover:border-primary/30 hover:bg-card/80 transition-all duration-300 group animate-fade-in stagger-3\">\r\n                    <div class=\"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n                        </svg>\r\n                    </div>\r\n                    <h3 class=\"font-semibold text-foreground mb-2\">${home.aiChatbot}</h3>\r\n                    <p class=\"text-sm text-muted-foreground mb-4 leading-relaxed\">\r\n                        ${home.aiChatbotDesc}\r\n                    </p>\r\n                    <span class=\"text-primary text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all duration-300\">\r\n                        ${home.accessDashboard}\r\n                        <svg class=\"w-4 h-4 transition-transform duration-300 group-hover:translate-x-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\r\n                        </svg>\r\n                    </span>\r\n                </a>\r\n\r\n                <!-- Card 3: Operations Dashboard -->\r\n                <a href=\"#dashboard\" class=\"glass border border-border rounded-xl p-6 hover:border-primary/30 hover:bg-card/80 transition-all duration-300 group animate-fade-in stagger-4\">\r\n                    <div class=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-primary flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n                        </svg>\r\n                    </div>\r\n                    <h3 class=\"font-semibold text-foreground mb-2\">${home.opsDashboard}</h3>\r\n                    <p class=\"text-sm text-muted-foreground mb-4 leading-relaxed\">\r\n                        ${home.opsDashboardDesc}\r\n                    </p>\r\n                    <span class=\"text-primary text-sm font-medium inline-flex items-center gap-1 group-hover:gap-2 transition-all duration-300\">\r\n                        ${home.accessDashboard}\r\n                        <svg class=\"w-4 h-4 transition-transform duration-300 group-hover:translate-x-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\r\n                        </svg>\r\n                    </span>\r\n                </a>\r\n            </div>\r\n        </section>\r\n\r\n        <!-- ========================================\r\n             CAPABILITIES SECTION\r\n        ======================================== -->\r\n        <section class=\"mb-8 animate-fade-in stagger-5\">\r\n            <div class=\"flex flex-wrap justify-center gap-3\">\r\n                <!-- AI-Powered Analysis -->\r\n                <div class=\"rounded-full bg-secondary/30 border border-border px-4 py-2 flex items-center gap-2 hover:border-primary/30 hover:text-primary transition-all duration-300 cursor-default\">\r\n                    <svg class=\"w-4 h-4 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n                    </svg>\r\n                    <span class=\"text-sm text-muted-foreground\">${home.aiPoweredAnalysis}</span>\r\n                </div>\r\n                \r\n                <!-- Real-time Monitoring -->\r\n                <div class=\"rounded-full bg-secondary/30 border border-border px-4 py-2 flex items-center gap-2 hover:border-primary/30 hover:text-primary transition-all duration-300 cursor-default\">\r\n                    <svg class=\"w-4 h-4 text-emerald-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                    <span class=\"text-sm text-muted-foreground\">${home.realtimeMonitoring}</span>\r\n                </div>\r\n                \r\n                <!-- Risk Mitigation -->\r\n                <div class=\"rounded-full bg-secondary/30 border border-border px-4 py-2 flex items-center gap-2 hover:border-primary/30 hover:text-primary transition-all duration-300 cursor-default\">\r\n                    <svg class=\"w-4 h-4 text-amber-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n                    </svg>\r\n                    <span class=\"text-sm text-muted-foreground\">${home.riskMitigation}</span>\r\n                </div>\r\n                \r\n                <!-- Cost Optimization -->\r\n                <div class=\"rounded-full bg-secondary/30 border border-border px-4 py-2 flex items-center gap-2 hover:border-primary/30 hover:text-primary transition-all duration-300 cursor-default\">\r\n                    <svg class=\"w-4 h-4 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\r\n                    </svg>\r\n                    <span class=\"text-sm text-muted-foreground\">${home.costOptimization}</span>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        \r\n    </div>\r\n</div>\r\n`;\r\n};\r\n\r\n/**\r\n * Home page handler\r\n */\r\nexport const homePage = async () => {\r\n    await App.View.render(template(), 'home');\r\n    // Initialize typewriter effect after render\r\n    setTimeout(initTypewriter, 100);\r\n    // Initialize stat counter animation\r\n    animate.initStatCounters(800);\r\n};\r\n","/**\r\n * OptiMine SPA - About/Generic Page\r\n * Used as placeholder for routes under development\r\n */\r\n\r\nimport { App } from '../../app.js';\r\nimport { Router } from '../../routes/routes.js';\r\nimport { getSection } from '../../utils/translations.js';\r\n\r\nconst templates = {\r\n    planning: () => {\r\n        const lang = App.Model.getState('language') || 'id';\r\n        const p = getSection(lang, 'planning');\r\n        \r\n        return `\r\n    <div class=\"min-h-[calc(100vh-4rem)] pt-6 relative\">\r\n        <!-- Background Effects -->\r\n        <div class=\"absolute inset-0 -z-10 overflow-hidden\">\r\n            <div class=\"radial-gradient absolute inset-0\"></div>\r\n            <div class=\"absolute top-20 right-1/4 w-72 h-72 bg-primary/10 rounded-full blur-3xl\"></div>\r\n            <div class=\"absolute bottom-20 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl\"></div>\r\n        </div>\r\n        \r\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n            <!-- Header -->\r\n            <div class=\"mb-8 animate-fade-in\">\r\n                <h1 class=\"font-heading text-3xl md:text-4xl font-bold text-foreground\">\r\n                    ${p.title}\r\n                </h1>\r\n                <p class=\"text-muted-foreground mt-2\">\r\n                    ${p.subtitle}\r\n                </p>\r\n            </div>\r\n\r\n            <!-- Main Grid: 2/3 Input, 1/3 Status -->\r\n            <div class=\"grid lg:grid-cols-3 gap-6\">\r\n                \r\n                <!-- LEFT: Input Section (2/3) -->\r\n                <div class=\"lg:col-span-2 space-y-6\">\r\n                    \r\n                    <!-- Weather Conditions Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-6 animate-fade-in stagger-1\">\r\n                        <h2 class=\"font-semibold text-lg text-foreground mb-6 flex items-center gap-2\">\r\n                            <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z\" />\r\n                            </svg>\r\n                            ${p.weatherConditions}\r\n                        </h2>\r\n                        \r\n                        <div class=\"space-y-6\">\r\n                            <!-- Rainfall Level Slider -->\r\n                            <div>\r\n                                <label class=\"block text-sm font-medium text-muted-foreground mb-3\">${p.rainfallLevel}</label>\r\n                                <input \r\n                                    type=\"range\" \r\n                                    min=\"0\" \r\n                                    max=\"100\" \r\n                                    value=\"50\"\r\n                                    class=\"w-full h-2 bg-secondary rounded-lg appearance-none cursor-pointer slider-primary\"\r\n                                >\r\n                                <div class=\"flex justify-between text-xs text-muted-foreground mt-2\">\r\n                                    <span>${p.low}</span>\r\n                                    <span>${p.high}</span>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <!-- Wave Height Slider -->\r\n                            <div>\r\n                                <label class=\"block text-sm font-medium text-muted-foreground mb-3\">${p.waveHeight}</label>\r\n                                <input \r\n                                    type=\"range\" \r\n                                    min=\"0\" \r\n                                    max=\"100\" \r\n                                    value=\"35\"\r\n                                    class=\"w-full h-2 bg-secondary rounded-lg appearance-none cursor-pointer slider-primary\"\r\n                                >\r\n                                <div class=\"flex justify-between text-xs text-muted-foreground mt-2\">\r\n                                    <span>${p.calm}</span>\r\n                                    <span>${p.rough}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Fleet Status Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-6 animate-fade-in stagger-2\">\r\n                        <h2 class=\"font-semibold text-lg text-foreground mb-6 flex items-center gap-2\">\r\n                            <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\" />\r\n                            </svg>\r\n                            ${p.fleetStatus}\r\n                        </h2>\r\n                        \r\n                        <div class=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label class=\"block text-sm font-medium text-muted-foreground mb-2\">${p.activeVehicles}</label>\r\n                                <input \r\n                                    type=\"number\" \r\n                                    value=\"25\"\r\n                                    class=\"w-full px-4 py-3 bg-secondary/30 border border-border rounded-lg text-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\r\n                                >\r\n                            </div>\r\n                            <div>\r\n                                <label class=\"block text-sm font-medium text-muted-foreground mb-2\">${p.maintenanceStatus}</label>\r\n                                <input \r\n                                    type=\"number\" \r\n                                    value=\"3\"\r\n                                    class=\"w-full px-4 py-3 bg-secondary/30 border border-border rounded-lg text-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\r\n                                >\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Ship Schedule Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-6 animate-fade-in stagger-3\">\r\n                        <h2 class=\"font-semibold text-lg text-foreground mb-6 flex items-center gap-2\">\r\n                            <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 13h2m-2 4h2m-2-8h2m4 8v-2a2 2 0 012-2h6a2 2 0 012 2v2M7 9V7a2 2 0 012-2h6a2 2 0 012 2v2m-4 4h.01M12 17h.01\" />\r\n                            </svg>\r\n                            ${p.shipSchedule}\r\n                        </h2>\r\n                        \r\n                        <div class=\"space-y-3\">\r\n                            <div class=\"flex items-center justify-between p-3 bg-secondary/30 border border-border rounded-lg\">\r\n                                <span class=\"text-foreground\">Vessel A - 08:00</span>\r\n                                <span class=\"px-3 py-1 text-xs font-medium bg-primary/20 text-primary rounded-full\">${p.active}</span>\r\n                            </div>\r\n                            <div class=\"flex items-center justify-between p-3 bg-secondary/30 border border-border rounded-lg\">\r\n                                <span class=\"text-foreground\">Vessel B - 14:00</span>\r\n                                <span class=\"px-3 py-1 text-xs font-medium bg-primary/20 text-primary rounded-full\">${p.active}</span>\r\n                            </div>\r\n                            <div class=\"flex items-center justify-between p-3 bg-secondary/30 border border-border rounded-lg\">\r\n                                <span class=\"text-foreground\">Vessel C - 20:00</span>\r\n                                <span class=\"px-3 py-1 text-xs font-medium bg-primary/20 text-primary rounded-full\">${p.active}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Generate Button -->\r\n                    <button class=\"w-full h-14 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 glow-hover animate-fade-in stagger-4\">\r\n                        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\r\n                        </svg>\r\n                        ${p.generatePlan}\r\n                    </button>\r\n                </div>\r\n                \r\n                <!-- RIGHT: Status Panel (1/3) -->\r\n                <div class=\"lg:col-span-1 space-y-6\">\r\n                    \r\n                    <!-- System Status Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-6 border-glow animate-fade-in stagger-2\">\r\n                        <h2 class=\"font-semibold text-lg text-foreground mb-6 flex items-center gap-2\">\r\n                            <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            </svg>\r\n                            ${p.systemStatus}\r\n                        </h2>\r\n                        \r\n                        <div class=\"space-y-3\">\r\n                            <div class=\"flex items-center gap-3 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg\">\r\n                                <span class=\"relative flex h-3 w-3\">\r\n                                    <span class=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\r\n                                    <span class=\"relative inline-flex rounded-full h-3 w-3 bg-emerald-500\"></span>\r\n                                </span>\r\n                                <span class=\"text-emerald-400 font-medium\">${p.aiSystemOnline}</span>\r\n                            </div>\r\n                            <div class=\"flex items-center gap-3 p-3 bg-primary/10 border border-primary/30 rounded-lg\">\r\n                                <span class=\"relative flex h-3 w-3\">\r\n                                    <span class=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75\"></span>\r\n                                    <span class=\"relative inline-flex rounded-full h-3 w-3 bg-primary\"></span>\r\n                                </span>\r\n                                <span class=\"text-primary font-medium\">${p.n8nReady}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Active Alerts Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-6 animate-fade-in stagger-3\">\r\n                        <h2 class=\"font-semibold text-lg text-foreground mb-6 flex items-center gap-2\">\r\n                            <svg class=\"w-5 h-5 text-amber-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n                            </svg>\r\n                            ${p.activeAlerts}\r\n                        </h2>\r\n                        \r\n                        <div class=\"space-y-3\">\r\n                            <div class=\"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg\">\r\n                                <p class=\"text-amber-400 text-sm\">${p.alertRainfall}</p>\r\n                            </div>\r\n                            <div class=\"p-3 bg-orange-500/10 border border-orange-500/30 rounded-lg\">\r\n                                <p class=\"text-orange-400 text-sm\">${p.alertMaintenance}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    `;\r\n    },\r\n\r\n    'ai-tools': () => {\r\n        const lang = App.Model.getState('language') || 'id';\r\n        const ai = getSection(lang, 'aiTools');\r\n        \r\n        return `\r\n    <div class=\"h-[calc(100vh-4rem)] pt-6\">\r\n        <div class=\"h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n            <!-- Header -->\r\n            <div class=\"mb-6 animate-fade-in\">\r\n                <h1 class=\"font-heading text-3xl md:text-4xl font-bold text-foreground\">${ai.title}</h1>\r\n                <p class=\"text-muted-foreground mt-1\">${ai.subtitle}</p>\r\n            </div>\r\n            \r\n            <!-- Main Grid: Chat 3/4, Sidebar 1/4 -->\r\n            <div class=\"grid lg:grid-cols-4 gap-6 h-[calc(100%-6rem)]\">\r\n                \r\n                <!-- CHAT AREA (3/4) -->\r\n                <div class=\"lg:col-span-3 flex flex-col glass border border-border rounded-xl overflow-hidden animate-fade-in stagger-1\">\r\n                    \r\n                    <!-- Messages Area -->\r\n                    <div class=\"flex-1 overflow-y-auto p-6 space-y-4\" id=\"chat-messages\">\r\n                        \r\n                        <!-- AI Message -->\r\n                        <div class=\"flex items-start gap-3\">\r\n                            <div class=\"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center flex-shrink-0\">\r\n                                <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <div class=\"flex-1 max-w-[85%]\">\r\n                                <div class=\"bg-secondary/50 border border-border rounded-2xl rounded-bl-sm p-4\">\r\n                                    <p class=\"text-foreground\">${ai.greeting}</p>\r\n                                </div>\r\n                                <span class=\"text-xs text-muted-foreground mt-1 block\">12:29 PM</span>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    \r\n                    <!-- Input Area -->\r\n                    <div class=\"border-t border-border p-4\">\r\n                        <div class=\"flex gap-3\">\r\n                            <input \r\n                                type=\"text\" \r\n                                id=\"chat-input\"\r\n                                placeholder=\"${ai.placeholder}\" \r\n                                class=\"flex-1 px-4 py-3 bg-secondary/30 border border-border rounded-xl text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\r\n                            >\r\n                            <button id=\"send-btn\" class=\"px-5 py-3 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl transition-all duration-300 glow-hover flex items-center justify-center\">\r\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <!-- SIDEBAR (1/4) -->\r\n                <div class=\"lg:col-span-1 space-y-4\">\r\n                    \r\n                    <!-- AI Status Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-4 border-glow animate-fade-in stagger-2\">\r\n                        <div class=\"flex items-center gap-2 mb-2\">\r\n                            <span class=\"relative flex h-3 w-3\">\r\n                                <span class=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\r\n                                <span class=\"relative inline-flex rounded-full h-3 w-3 bg-emerald-500\"></span>\r\n                            </span>\r\n                            <span class=\"text-emerald-400 font-semibold\">${ai.aiOnline}</span>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                            <span>${ai.responseTime}: &lt;2s</span>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Suggested Prompts Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-4 animate-fade-in stagger-3\">\r\n                        <h3 class=\"font-semibold text-foreground mb-3 flex items-center gap-2\">\r\n                            <svg class=\"w-4 h-4 text-amber-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\r\n                            </svg>\r\n                            ${ai.suggestedPrompts}\r\n                        </h3>\r\n                        <div class=\"space-y-2\">\r\n                            <button class=\"suggested-prompt w-full text-left p-3 text-xs text-muted-foreground bg-secondary/30 border border-border rounded-lg hover:border-primary/30 hover:text-foreground transition-all\">\r\n                                ${ai.prompt1}\r\n                            </button>\r\n                            <button class=\"suggested-prompt w-full text-left p-3 text-xs text-muted-foreground bg-secondary/30 border border-border rounded-lg hover:border-primary/30 hover:text-foreground transition-all\">\r\n                                ${ai.prompt2}\r\n                            </button>\r\n                            <button class=\"suggested-prompt w-full text-left p-3 text-xs text-muted-foreground bg-secondary/30 border border-border rounded-lg hover:border-primary/30 hover:text-foreground transition-all\">\r\n                                ${ai.prompt3}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Integration Info Card -->\r\n                    <div class=\"glass border border-border rounded-xl p-4 animate-fade-in stagger-4\">\r\n                        <h3 class=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\r\n                            <svg class=\"w-4 h-4 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\r\n                            </svg>\r\n                            ${ai.integration}\r\n                        </h3>\r\n                        <p class=\"text-xs text-muted-foreground\">\r\n                            ${ai.integrationDesc}\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    `;\r\n    },\r\n\r\n    dashboard: () => {\r\n        const lang = App.Model.getState('language') || 'id';\r\n        const d = getSection(lang, 'dashboard');\r\n        \r\n        return `\r\n    <div class=\"min-h-screen pt-6 pb-8 px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"max-w-7xl mx-auto\">\r\n            <div class=\"mb-8 animate-fade-in\">\r\n                <h1 class=\"font-heading text-3xl md:text-4xl font-bold text-foreground\">\r\n                    ${d.title}\r\n                </h1>\r\n                <p class=\"text-muted-foreground mt-2\">\r\n                    ${d.subtitle}\r\n                </p>\r\n            </div>\r\n\r\n            <div class=\"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n                <div class=\"glass border border-border rounded-xl p-4 animate-fade-in stagger-1\">\r\n                    <div class=\"flex items-center justify-between mb-2\">\r\n                        <span class=\"text-sm text-muted-foreground\">${d.totalProduction}</span>\r\n                        <i data-lucide=\"trending-up\" class=\"w-4 h-4 text-green-500\"></i>\r\n                    </div>\r\n                    <p class=\"text-2xl font-bold text-foreground\">24,580</p>\r\n                    <p class=\"text-xs text-green-500\">+12.5% ${d.fromLastMonth}</p>\r\n                </div>\r\n                \r\n                <div class=\"glass border border-border rounded-xl p-4 animate-fade-in stagger-2\">\r\n                    <div class=\"flex items-center justify-between mb-2\">\r\n                        <span class=\"text-sm text-muted-foreground\">${d.activeEquipment}</span>\r\n                        <i data-lucide=\"truck\" class=\"w-4 h-4 text-primary\"></i>\r\n                    </div>\r\n                    <p class=\"text-2xl font-bold text-foreground\">42</p>\r\n                    <p class=\"text-xs text-muted-foreground\">${d.outOfTotal}</p>\r\n                </div>\r\n                \r\n                <div class=\"glass border border-border rounded-xl p-4 animate-fade-in stagger-3\">\r\n                    <div class=\"flex items-center justify-between mb-2\">\r\n                        <span class=\"text-sm text-muted-foreground\">${d.efficiencyRate}</span>\r\n                        <i data-lucide=\"gauge\" class=\"w-4 h-4 text-amber-500\"></i>\r\n                    </div>\r\n                    <p class=\"text-2xl font-bold text-foreground\">94.2%</p>\r\n                    <p class=\"text-xs text-amber-500\">${d.target}: 95%</p>\r\n                </div>\r\n                \r\n                <div class=\"glass border border-border rounded-xl p-4 animate-fade-in stagger-4\">\r\n                    <div class=\"flex items-center justify-between mb-2\">\r\n                        <span class=\"text-sm text-muted-foreground\">${d.costSavings}</span>\r\n                        <i data-lucide=\"dollar-sign\" class=\"w-4 h-4 text-green-500\"></i>\r\n                    </div>\r\n                    <p class=\"text-2xl font-bold text-foreground\">$1.2M</p>\r\n                    <p class=\"text-xs text-green-500\">${d.thisQuarter}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"grid lg:grid-cols-2 gap-6\">\r\n                <div class=\"glass border border-border rounded-xl p-6 animate-fade-in stagger-5\">\r\n                    <h3 class=\"font-semibold text-foreground mb-4 flex items-center gap-2\">\r\n                        <i data-lucide=\"line-chart\" class=\"w-5 h-5 text-primary\"></i>\r\n                        ${d.productionTrends}\r\n                    </h3>\r\n                    <div class=\"h-64 flex items-center justify-center bg-secondary/20 rounded-lg\">\r\n                        <p class=\"text-muted-foreground\">${d.chartPlaceholder}</p>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class=\"glass border border-border rounded-xl p-6 animate-fade-in stagger-5\">\r\n                    <h3 class=\"font-semibold text-foreground mb-4 flex items-center gap-2\">\r\n                        <i data-lucide=\"truck\" class=\"w-5 h-5 text-primary\"></i>\r\n                        ${d.equipmentStatus}\r\n                    </h3>\r\n                    <div class=\"h-64 flex items-center justify-center bg-secondary/20 rounded-lg\">\r\n                        <p class=\"text-muted-foreground\">${d.statusPlaceholder}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    `;\r\n    },\r\n\r\n    auth: () => {\r\n        const lang = localStorage.getItem('optimine-language') || 'id';\r\n        const a = getSection(lang, 'auth');\r\n        \r\n        return `\r\n    <div class=\"min-h-screen flex items-center justify-center px-4 pt-6 pb-8\">\r\n        <div class=\"w-full max-w-md\">\r\n            <!-- Main Auth Card -->\r\n            <div id=\"auth-card\" class=\"glass border border-border rounded-2xl p-6 sm:p-8 animate-scale-in\">\r\n                <!-- Header with Logo -->\r\n                <div class=\"text-center mb-6\">\r\n                    <img \r\n                        src=\"assets/images/b (192 x 192 piksel) (1).png\" \r\n                        alt=\"OptiMine Logo\" \r\n                        class=\"w-16 h-16 mx-auto mb-4 rounded-full border-2 border-amber-500/50 shadow-lg\"\r\n                    >\r\n                    <h1 class=\"font-heading text-2xl font-bold\">\r\n                        <span class=\"text-primary\">Opti</span><span class=\"text-foreground\">Mine</span>\r\n                    </h1>\r\n                    <p class=\"text-sm text-muted-foreground mt-1\">Mining Value Chain Optimization Platform</p>\r\n                </div>\r\n                \r\n                <!-- Tab Navigation -->\r\n                <div class=\"grid grid-cols-2 bg-secondary/50 border border-border rounded-lg p-1 mb-6\">\r\n                    <button id=\"login-tab\" class=\"auth-tab active py-2.5 px-4 text-sm font-medium rounded-md transition-all duration-300\">\r\n                        ${a.login}\r\n                    </button>\r\n                    <button id=\"register-tab\" class=\"auth-tab py-2.5 px-4 text-sm font-medium rounded-md transition-all duration-300\">\r\n                        ${a.register}\r\n                    </button>\r\n                </div>\r\n                \r\n                <!-- LOGIN FORM -->\r\n                <form id=\"login-form\" class=\"space-y-4\">\r\n                    <!-- Email -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.email}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"email\" \r\n                                id=\"login-email\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"email@example.com\"\r\n                            >\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Password -->\r\n                    <div>\r\n                        <div class=\"flex items-center justify-between mb-2\">\r\n                            <label class=\"block text-sm font-medium text-foreground\">${a.password}</label>\r\n                            <button type=\"button\" id=\"forgot-password-btn\" class=\"text-xs text-primary hover:text-primary/80 transition-colors\">\r\n                                ${a.forgotPassword}\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"password\" \r\n                                id=\"login-password\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"â¢â¢â¢â¢â¢â¢â¢â¢\"\r\n                            >\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Submit Button -->\r\n                    <button \r\n                        type=\"submit\" \r\n                        class=\"w-full py-3 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg font-medium transition-all duration-300 glow-hover mt-6\"\r\n                    >\r\n                        ${a.signIn}\r\n                    </button>\r\n                </form>\r\n                \r\n                <!-- REGISTER FORM -->\r\n                <form id=\"register-form\" class=\"space-y-4 hidden\">\r\n                    <!-- Full Name -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.fullName}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"text\" \r\n                                id=\"register-name\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"John Doe\"\r\n                            >\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Email -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.email}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"email\" \r\n                                id=\"register-email\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"email@example.com\"\r\n                            >\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Password -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.password}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"password\" \r\n                                id=\"register-password\" \r\n                                required \r\n                                minlength=\"6\"\r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"â¢â¢â¢â¢â¢â¢â¢â¢\"\r\n                            >\r\n                        </div>\r\n                        <!-- Password Strength Container (hidden by default) -->\r\n                        <div id=\"password-info-container\" class=\"hidden mt-3 p-3 bg-secondary/30 border border-border rounded-lg animate-fade-in\">\r\n                            <!-- Password Strength Indicator -->\r\n                            <div id=\"password-strength-container\" class=\"hidden mb-3\">\r\n                                <div class=\"flex gap-1 mb-1\">\r\n                                    <div id=\"strength-bar-1\" class=\"h-1.5 flex-1 rounded-full bg-secondary transition-colors duration-300\"></div>\r\n                                    <div id=\"strength-bar-2\" class=\"h-1.5 flex-1 rounded-full bg-secondary transition-colors duration-300\"></div>\r\n                                    <div id=\"strength-bar-3\" class=\"h-1.5 flex-1 rounded-full bg-secondary transition-colors duration-300\"></div>\r\n                                    <div id=\"strength-bar-4\" class=\"h-1.5 flex-1 rounded-full bg-secondary transition-colors duration-300\"></div>\r\n                                </div>\r\n                                <p id=\"password-strength-text\" class=\"text-xs font-medium\"></p>\r\n                            </div>\r\n                            <!-- Password Requirements -->\r\n                            <div id=\"password-requirements\" class=\"space-y-1.5 text-xs\">\r\n                                <p id=\"req-title\" class=\"text-muted-foreground font-medium mb-2\"></p>\r\n                                <p id=\"req-length\" class=\"flex items-center gap-2 text-muted-foreground\">\r\n                                    <svg class=\"w-4 h-4 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"2\"/>\r\n                                    </svg>\r\n                                    <span></span>\r\n                                </p>\r\n                                <p id=\"req-uppercase\" class=\"flex items-center gap-2 text-muted-foreground\">\r\n                                    <svg class=\"w-4 h-4 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"2\"/>\r\n                                    </svg>\r\n                                    <span></span>\r\n                                </p>\r\n                                <p id=\"req-number\" class=\"flex items-center gap-2 text-muted-foreground\">\r\n                                    <svg class=\"w-4 h-4 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"2\"/>\r\n                                    </svg>\r\n                                    <span></span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Confirm Password -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.confirmPassword}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"password\" \r\n                                id=\"register-confirm-password\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"â¢â¢â¢â¢â¢â¢â¢â¢\"\r\n                            >\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Role Dropdown -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.role}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <select \r\n                                id=\"register-role\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-10 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none cursor-pointer\"\r\n                            >\r\n                                <option value=\"mine_planner\">${a.miningPlanner}</option>\r\n                                <option value=\"shipping_planner\">${a.shippingPlanner}</option>\r\n                            </select>\r\n                            <div class=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Submit Button -->\r\n                    <button \r\n                        type=\"submit\" \r\n                        class=\"w-full py-3 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg font-medium transition-all duration-300 glow-hover mt-2\"\r\n                    >\r\n                        ${a.createAccount}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n            \r\n            <!-- FORGOT PASSWORD CARD -->\r\n            <div id=\"forgot-password-card\" class=\"glass border border-border rounded-2xl p-6 sm:p-8 animate-scale-in hidden\">\r\n                <!-- Header -->\r\n                <div class=\"text-center mb-6\">\r\n                    <div class=\"w-16 h-16 mx-auto mb-4 rounded-full bg-primary/20 flex items-center justify-center\">\r\n                        <svg class=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\r\n                        </svg>\r\n                    </div>\r\n                    <h2 class=\"font-heading text-xl font-bold text-foreground\">${a.resetPassword}</h2>\r\n                    <p class=\"text-sm text-muted-foreground mt-2\">${a.resetDesc}</p>\r\n                </div>\r\n                \r\n                <form id=\"forgot-password-form\" class=\"space-y-4\">\r\n                    <!-- Email -->\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-foreground mb-2\">${a.email}</label>\r\n                        <div class=\"relative\">\r\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input \r\n                                type=\"email\" \r\n                                id=\"forgot-email\" \r\n                                required \r\n                                class=\"w-full pl-10 pr-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-primary focus:border-transparent transition-all\" \r\n                                placeholder=\"email@example.com\"\r\n                            >\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <!-- Submit Button -->\r\n                    <button \r\n                        type=\"submit\" \r\n                        class=\"w-full py-3 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg font-medium transition-all duration-300 glow-hover\"\r\n                    >\r\n                        ${a.sendResetLink}\r\n                    </button>\r\n                    \r\n                    <!-- Back to Login -->\r\n                    <button \r\n                        type=\"button\" \r\n                        id=\"back-to-login-btn\"\r\n                        class=\"w-full py-3 bg-secondary/50 hover:bg-secondary/70 text-foreground border border-border rounded-lg font-medium transition-all duration-300\"\r\n                    >\r\n                        ${a.backToLogin}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    `;\r\n    },\r\n\r\n    profile: () => {\r\n        const user = JSON.parse(localStorage.getItem('optimine-user') || '{}');\r\n        const theme = localStorage.getItem('optimine-theme') || 'dark';\r\n        const lang = localStorage.getItem('optimine-language') || 'id';\r\n        const pr = getSection(lang, 'profile');\r\n        \r\n        return `\r\n        <div class=\"min-h-screen pt-6 pb-8 px-4 sm:px-6 lg:px-8\">\r\n            <div class=\"max-w-2xl mx-auto\">\r\n                <div class=\"mb-8 animate-fade-in\">\r\n                    <h1 class=\"font-heading text-3xl md:text-4xl font-bold text-foreground\">\r\n                        ${pr.title}\r\n                    </h1>\r\n                    <p class=\"text-muted-foreground mt-2\">\r\n                        ${pr.subtitle}\r\n                    </p>\r\n                </div>\r\n\r\n                <div class=\"glass border border-border rounded-xl p-6 mb-6 animate-fade-in stagger-1\">\r\n                    <div class=\"flex items-center gap-4 mb-6\">\r\n                        <div class=\"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center text-white text-2xl font-bold\">\r\n                            ${(user.name || 'U').charAt(0).toUpperCase()}\r\n                        </div>\r\n                        <div>\r\n                            <h2 class=\"text-xl font-semibold text-foreground\">${user.name || 'User'}</h2>\r\n                            <p class=\"text-muted-foreground\">${user.email || 'user@example.com'}</p>\r\n                            <span class=\"inline-block mt-1 px-2 py-0.5 text-xs bg-primary/10 text-primary rounded-full\">${user.role || 'member'}</span>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"space-y-4\">\r\n                        <div>\r\n                            <label class=\"block text-sm font-medium text-foreground mb-1\">${pr.displayName}</label>\r\n                            <input type=\"text\" value=\"${user.name || ''}\" class=\"w-full px-4 py-2.5 bg-secondary/50 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\r\n                        </div>\r\n                        <div>\r\n                            <label class=\"block text-sm font-medium text-foreground mb-1\">${pr.email}</label>\r\n                            <input type=\"email\" value=\"${user.email || ''}\" disabled class=\"w-full px-4 py-2.5 bg-secondary/30 border border-border rounded-lg text-muted-foreground\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"glass border border-border rounded-xl p-6 mb-6 animate-fade-in stagger-2\">\r\n                    <h3 class=\"font-semibold text-foreground mb-4\">${pr.preferences}</h3>\r\n                    \r\n                    <div class=\"space-y-4\">\r\n                        <div class=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <p class=\"font-medium text-foreground\">${pr.darkMode}</p>\r\n                                <p class=\"text-sm text-muted-foreground\">${pr.useDarkTheme}</p>\r\n                            </div>\r\n                            <button id=\"profile-theme-toggle\" class=\"relative w-12 h-6 bg-secondary rounded-full transition-colors ${theme === 'dark' ? 'bg-primary/30' : ''}\">\r\n                                <span class=\"absolute left-1 top-1 w-4 h-4 bg-foreground rounded-full transition-transform ${theme === 'dark' ? 'translate-x-6 bg-primary' : ''}\"></span>\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <div class=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <p class=\"font-medium text-foreground\">${pr.language}</p>\r\n                                <p class=\"text-sm text-muted-foreground\">${pr.selectLanguage}</p>\r\n                            </div>\r\n                            <div class=\"flex gap-2\">\r\n                                <button class=\"profile-lang-btn px-3 py-1.5 text-sm rounded-md transition-colors ${lang === 'en' ? 'bg-primary/10 text-primary' : 'hover:bg-secondary/50'}\" data-lang=\"en\">ð¬ð§ EN</button>\r\n                                <button class=\"profile-lang-btn px-3 py-1.5 text-sm rounded-md transition-colors ${lang === 'id' ? 'bg-primary/10 text-primary' : 'hover:bg-secondary/50'}\" data-lang=\"id\">ð®ð© ID</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <button id=\"logout-btn\" class=\"w-full py-2.5 border border-red-500/50 text-red-500 hover:bg-red-500/10 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 animate-fade-in stagger-3\">\r\n                    <i data-lucide=\"log-out\" class=\"w-4 h-4\"></i>\r\n                    ${pr.signOut}\r\n                </button>\r\n            </div>\r\n        </div>\r\n        `;\r\n    }\r\n};\r\n\r\n/**\r\n * Setup auth form handlers\r\n */\r\nconst setupAuthHandlers = () => {\r\n    const loginTab = document.getElementById('login-tab');\r\n    const registerTab = document.getElementById('register-tab');\r\n    let loginForm = document.getElementById('login-form');\r\n    let registerForm = document.getElementById('register-form');\r\n    const authCard = document.getElementById('auth-card');\r\n    const forgotPasswordCard = document.getElementById('forgot-password-card');\r\n    const forgotPasswordBtn = document.getElementById('forgot-password-btn');\r\n    const backToLoginBtn = document.getElementById('back-to-login-btn');\r\n    const forgotPasswordForm = document.getElementById('forgot-password-form');\r\n    \r\n    // Clone forms to remove all previous event listeners (prevent duplicate handlers)\r\n    if (loginForm) {\r\n        const loginFormClone = loginForm.cloneNode(true);\r\n        loginForm.replaceWith(loginFormClone);\r\n        loginForm = loginFormClone;\r\n    }\r\n    if (registerForm) {\r\n        const registerFormClone = registerForm.cloneNode(true);\r\n        registerForm.replaceWith(registerFormClone);\r\n        registerForm = registerFormClone;\r\n    }\r\n    \r\n    // Tab switching - Login\r\n    loginTab?.addEventListener('click', () => {\r\n        loginTab.classList.add('active');\r\n        registerTab?.classList.remove('active');\r\n        loginForm?.classList.remove('hidden');\r\n        registerForm?.classList.add('hidden');\r\n    });\r\n    \r\n    // Tab switching - Register\r\n    registerTab?.addEventListener('click', () => {\r\n        registerTab.classList.add('active');\r\n        loginTab?.classList.remove('active');\r\n        registerForm?.classList.remove('hidden');\r\n        loginForm?.classList.add('hidden');\r\n    });\r\n    \r\n    // Password Strength Checker\r\n    const registerPassword = document.getElementById('register-password');\r\n    const passwordInfoContainer = document.getElementById('password-info-container');\r\n    const strengthContainer = document.getElementById('password-strength-container');\r\n    const strengthText = document.getElementById('password-strength-text');\r\n    const strengthBars = [\r\n        document.getElementById('strength-bar-1'),\r\n        document.getElementById('strength-bar-2'),\r\n        document.getElementById('strength-bar-3'),\r\n        document.getElementById('strength-bar-4')\r\n    ];\r\n    const reqTitle = document.getElementById('req-title');\r\n    const reqLength = document.getElementById('req-length');\r\n    const reqUppercase = document.getElementById('req-uppercase');\r\n    const reqNumber = document.getElementById('req-number');\r\n    \r\n    // Get current language translations\r\n    const getAuthTranslations = () => {\r\n        const lang = localStorage.getItem('optimine-language') || 'id';\r\n        return window.getSection ? window.getSection(lang, 'auth') : {\r\n            passwordRequirements: lang === 'en' ? 'Password Requirements:' : 'Persyaratan Password:',\r\n            minLength: lang === 'en' ? 'Minimum 6 characters' : 'Minimal 6 karakter',\r\n            uppercase: lang === 'en' ? 'Uppercase letter (A-Z)' : 'Huruf kapital (A-Z)',\r\n            number: lang === 'en' ? 'Number (0-9)' : 'Angka (0-9)',\r\n            weak: lang === 'en' ? 'Weak' : 'Lemah',\r\n            medium: lang === 'en' ? 'Medium' : 'Sedang',\r\n            fair: lang === 'en' ? 'Fair' : 'Cukup Kuat',\r\n            strong: lang === 'en' ? 'Strong' : 'Kuat',\r\n            passwordError: lang === 'en' ? 'Password must be at least 6 characters, contain uppercase letter and number!' : 'Password harus minimal 6 karakter, mengandung huruf kapital dan angka!',\r\n            passwordMismatch: lang === 'en' ? 'Passwords do not match!' : 'Password tidak cocok!'\r\n        };\r\n    };\r\n    \r\n    // Initialize requirement texts\r\n    const initPasswordRequirements = () => {\r\n        const t = getAuthTranslations();\r\n        if (reqTitle) reqTitle.textContent = t.passwordRequirements;\r\n        if (reqLength) reqLength.querySelector('span').textContent = t.minLength;\r\n        if (reqUppercase) reqUppercase.querySelector('span').textContent = t.uppercase;\r\n        if (reqNumber) reqNumber.querySelector('span').textContent = t.number;\r\n    };\r\n    \r\n    const checkPasswordStrength = (password) => {\r\n        const t = getAuthTranslations();\r\n        let strength = 0;\r\n        const checks = {\r\n            length: password.length >= 6,\r\n            uppercase: /[A-Z]/.test(password),\r\n            number: /[0-9]/.test(password),\r\n            special: /[!@#$%^&*(),.?\":{}|<>]/.test(password),\r\n            lowercase: /[a-z]/.test(password)\r\n        };\r\n        \r\n        // Update requirement indicators\r\n        updateRequirement(reqLength, checks.length, t.minLength);\r\n        updateRequirement(reqUppercase, checks.uppercase, t.uppercase);\r\n        updateRequirement(reqNumber, checks.number, t.number);\r\n        \r\n        // Calculate strength\r\n        if (checks.length) strength++;\r\n        if (checks.uppercase) strength++;\r\n        if (checks.number) strength++;\r\n        if (checks.special || (checks.lowercase && password.length >= 8)) strength++;\r\n        \r\n        return { strength, checks };\r\n    };\r\n    \r\n    const updateRequirement = (element, isValid, text) => {\r\n        if (!element) return;\r\n        if (isValid) {\r\n            element.classList.remove('text-muted-foreground');\r\n            element.classList.add('text-green-500');\r\n            element.innerHTML = `\r\n                <svg class=\"w-4 h-4 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n                </svg>\r\n                <span>${text}</span>\r\n            `;\r\n        } else {\r\n            element.classList.add('text-muted-foreground');\r\n            element.classList.remove('text-green-500');\r\n            element.innerHTML = `\r\n                <svg class=\"w-4 h-4 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"2\"/>\r\n                </svg>\r\n                <span>${text}</span>\r\n            `;\r\n        }\r\n    };\r\n    \r\n    const updateStrengthUI = (strength) => {\r\n        const t = getAuthTranslations();\r\n        const colors = {\r\n            0: { bar: 'bg-secondary', text: '', label: '' },\r\n            1: { bar: 'bg-red-500', text: 'text-red-500', label: t.weak },\r\n            2: { bar: 'bg-orange-500', text: 'text-orange-500', label: t.medium },\r\n            3: { bar: 'bg-yellow-500', text: 'text-yellow-500', label: t.fair },\r\n            4: { bar: 'bg-green-500', text: 'text-green-500', label: t.strong }\r\n        };\r\n        \r\n        const config = colors[strength];\r\n        \r\n        // Update bars\r\n        strengthBars.forEach((bar, index) => {\r\n            if (!bar) return;\r\n            bar.className = 'h-1.5 flex-1 rounded-full transition-colors duration-300';\r\n            if (index < strength) {\r\n                bar.classList.add(config.bar);\r\n            } else {\r\n                bar.classList.add('bg-secondary');\r\n            }\r\n        });\r\n        \r\n        // Update text\r\n        if (strengthText) {\r\n            strengthText.textContent = config.label;\r\n            strengthText.className = `text-xs font-medium ${config.text}`;\r\n        }\r\n    };\r\n    \r\n    // Show password info on focus\r\n    registerPassword?.addEventListener('focus', () => {\r\n        initPasswordRequirements();\r\n        passwordInfoContainer?.classList.remove('hidden');\r\n    });\r\n    \r\n    // Hide password info on blur (only if empty)\r\n    registerPassword?.addEventListener('blur', () => {\r\n        if (!registerPassword.value) {\r\n            passwordInfoContainer?.classList.add('hidden');\r\n            strengthContainer?.classList.add('hidden');\r\n        }\r\n    });\r\n    \r\n    registerPassword?.addEventListener('input', (e) => {\r\n        const password = e.target.value;\r\n        const t = getAuthTranslations();\r\n        \r\n        // Always show container when typing\r\n        passwordInfoContainer?.classList.remove('hidden');\r\n        \r\n        if (password.length > 0) {\r\n            strengthContainer?.classList.remove('hidden');\r\n            const { strength } = checkPasswordStrength(password);\r\n            updateStrengthUI(strength);\r\n        } else {\r\n            strengthContainer?.classList.add('hidden');\r\n            updateStrengthUI(0);\r\n            // Reset requirements with translations\r\n            updateRequirement(reqLength, false, t.minLength);\r\n            updateRequirement(reqUppercase, false, t.uppercase);\r\n            updateRequirement(reqNumber, false, t.number);\r\n        }\r\n    });\r\n    \r\n    // Show Forgot Password\r\n    forgotPasswordBtn?.addEventListener('click', () => {\r\n        authCard?.classList.add('hidden');\r\n        forgotPasswordCard?.classList.remove('hidden');\r\n    });\r\n    \r\n    // Back to Login from Forgot Password\r\n    backToLoginBtn?.addEventListener('click', () => {\r\n        forgotPasswordCard?.classList.add('hidden');\r\n        authCard?.classList.remove('hidden');\r\n        // Reset to login tab\r\n        loginTab?.classList.add('active');\r\n        registerTab?.classList.remove('active');\r\n        loginForm?.classList.remove('hidden');\r\n        registerForm?.classList.add('hidden');\r\n    });\r\n    \r\n    // Login Form Submit\r\n    loginForm?.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const email = document.getElementById('login-email')?.value;\r\n        const password = document.getElementById('login-password')?.value;\r\n        \r\n        // Add loading state\r\n        const submitBtn = loginForm.querySelector('button[type=\"submit\"]');\r\n        const originalText = submitBtn?.innerHTML;\r\n        if (submitBtn) {\r\n            submitBtn.innerHTML = `\r\n                <svg class=\"animate-spin h-5 w-5 mx-auto\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n            `;\r\n            submitBtn.disabled = true;\r\n        }\r\n        \r\n        await App.Presenter.handleLogin(email, password);\r\n        \r\n        // Reset button\r\n        if (submitBtn) {\r\n            submitBtn.innerHTML = originalText;\r\n            submitBtn.disabled = false;\r\n        }\r\n    });\r\n    \r\n    // Register Form Submit\r\n    registerForm?.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const name = document.getElementById('register-name')?.value;\r\n        const email = document.getElementById('register-email')?.value;\r\n        const password = document.getElementById('register-password')?.value;\r\n        const confirmPassword = document.getElementById('register-confirm-password')?.value;\r\n        const role = document.getElementById('register-role')?.value;\r\n        \r\n        // Get translations for error messages\r\n        const t = getAuthTranslations();\r\n        \r\n        // Validate password requirements\r\n        const hasMinLength = password.length >= 6;\r\n        const hasUppercase = /[A-Z]/.test(password);\r\n        const hasNumber = /[0-9]/.test(password);\r\n        \r\n        if (!hasMinLength || !hasUppercase || !hasNumber) {\r\n            // Don't show toast here - let Presenter handle it\r\n            return;\r\n        }\r\n        \r\n        // Validate passwords match\r\n        if (password !== confirmPassword) {\r\n            // Don't show toast here - let Presenter handle it\r\n            return;\r\n        }\r\n        \r\n        // Add loading state\r\n        const submitBtn = registerForm.querySelector('button[type=\"submit\"]');\r\n        const originalText = submitBtn?.innerHTML;\r\n        if (submitBtn) {\r\n            submitBtn.innerHTML = `\r\n                <svg class=\"animate-spin h-5 w-5 mx-auto\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n            `;\r\n            submitBtn.disabled = true;\r\n        }\r\n        \r\n        await App.Presenter.handleRegister(name, email, password, role);\r\n        \r\n        // Reset button\r\n        if (submitBtn) {\r\n            submitBtn.innerHTML = originalText;\r\n            submitBtn.disabled = false;\r\n        }\r\n    });\r\n    \r\n    // Forgot Password Form Submit\r\n    forgotPasswordForm?.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const email = document.getElementById('forgot-email')?.value;\r\n        \r\n        // Add loading state\r\n        const submitBtn = forgotPasswordForm.querySelector('button[type=\"submit\"]');\r\n        const originalText = submitBtn?.innerHTML;\r\n        if (submitBtn) {\r\n            submitBtn.innerHTML = `\r\n                <svg class=\"animate-spin h-5 w-5 mx-auto\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n            `;\r\n            submitBtn.disabled = true;\r\n        }\r\n        \r\n        // Simulate password reset (in real app, this would call an API)\r\n        await new Promise(resolve => setTimeout(resolve, 1500));\r\n        alert(`Password reset link sent to ${email}`);\r\n        \r\n        // Reset button and go back to login\r\n        if (submitBtn) {\r\n            submitBtn.innerHTML = originalText;\r\n            submitBtn.disabled = false;\r\n        }\r\n        \r\n        forgotPasswordCard?.classList.add('hidden');\r\n        authCard?.classList.remove('hidden');\r\n    });\r\n};\r\n\r\n/**\r\n * Setup profile handlers\r\n */\r\nconst setupProfileHandlers = () => {\r\n    let logoutBtn = document.getElementById('logout-btn');\r\n    let themeToggle = document.getElementById('profile-theme-toggle');\r\n    const langBtns = document.querySelectorAll('.profile-lang-btn');\r\n    \r\n    // Clone buttons to remove all previous event listeners (prevent duplicate handlers)\r\n    if (logoutBtn) {\r\n        const logoutBtnClone = logoutBtn.cloneNode(true);\r\n        logoutBtn.replaceWith(logoutBtnClone);\r\n        logoutBtn = logoutBtnClone;\r\n    }\r\n    if (themeToggle) {\r\n        const themeToggleClone = themeToggle.cloneNode(true);\r\n        themeToggle.replaceWith(themeToggleClone);\r\n        themeToggle = themeToggleClone;\r\n    }\r\n    \r\n    logoutBtn?.addEventListener('click', () => {\r\n        App.Presenter.handleLogout();\r\n    });\r\n    \r\n    themeToggle?.addEventListener('click', () => {\r\n        App.Model.toggleTheme();\r\n        const dot = themeToggle.querySelector('span');\r\n        const isDark = App.Model.getState('theme') === 'dark';\r\n        dot?.classList.toggle('translate-x-6', isDark);\r\n        dot?.classList.toggle('bg-primary', isDark);\r\n        themeToggle.classList.toggle('bg-primary/30', isDark);\r\n    });\r\n    \r\n    langBtns.forEach(btn => {\r\n        btn.addEventListener('click', () => {\r\n            const lang = btn.dataset.lang;\r\n            App.Model.setLanguage(lang);\r\n            // Re-render profile page to apply translations\r\n            Router.handleRouteChange();\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * Setup AI Chat handlers\r\n */\r\nconst setupChatHandlers = () => {\r\n    const chatInput = document.getElementById('chat-input');\r\n    const sendBtn = document.getElementById('send-btn');\r\n    const messagesContainer = document.getElementById('chat-messages');\r\n    const suggestedPrompts = document.querySelectorAll('.suggested-prompt');\r\n    \r\n    // Function to add a message to chat\r\n    const addMessage = (content, isUser = false) => {\r\n        const time = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n        \r\n        const messageHTML = isUser ? `\r\n            <div class=\"flex items-start gap-3 justify-end\">\r\n                <div class=\"flex-1 max-w-[85%] flex flex-col items-end\">\r\n                    <div class=\"bg-primary text-primary-foreground rounded-2xl rounded-br-sm p-4\">\r\n                        <p>${content}</p>\r\n                    </div>\r\n                    <span class=\"text-xs text-muted-foreground mt-1\">${time}</span>\r\n                </div>\r\n                <div class=\"w-10 h-10 rounded-lg bg-secondary flex items-center justify-center flex-shrink-0\">\r\n                    <svg class=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        ` : `\r\n            <div class=\"flex items-start gap-3\">\r\n                <div class=\"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center flex-shrink-0\">\r\n                    <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                    </svg>\r\n                </div>\r\n                <div class=\"flex-1 max-w-[85%]\">\r\n                    <div class=\"bg-secondary/50 border border-border rounded-2xl rounded-bl-sm p-4\">\r\n                        <p class=\"text-foreground\">${content}</p>\r\n                    </div>\r\n                    <span class=\"text-xs text-muted-foreground mt-1 block\">${time}</span>\r\n                </div>\r\n            </div>\r\n        `;\r\n        \r\n        messagesContainer?.insertAdjacentHTML('beforeend', messageHTML);\r\n        \r\n        // Auto-scroll to bottom\r\n        if (messagesContainer) {\r\n            messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n        }\r\n    };\r\n    \r\n    // Function to send message\r\n    const sendMessage = () => {\r\n        const message = chatInput?.value?.trim();\r\n        if (!message) return;\r\n        \r\n        // Add user message\r\n        addMessage(message, true);\r\n        \r\n        // Clear input\r\n        if (chatInput) chatInput.value = '';\r\n        \r\n        // Simulate AI response (in real app, this would call an API)\r\n        setTimeout(() => {\r\n            const responses = [\r\n                \"Based on current weather conditions and fleet status, I recommend adjusting the mining schedule to avoid peak rainfall hours.\",\r\n                \"I've analyzed your query. The current conditions suggest optimal production can be achieved by reallocating 3 vehicles from Site A to Site B.\",\r\n                \"According to the latest data, shipping delays are expected to be minimal today. I recommend proceeding with the scheduled departures.\",\r\n                \"I've processed your request. The AI analysis indicates that maintenance should be scheduled during low-activity periods to minimize operational impact.\"\r\n            ];\r\n            const randomResponse = responses[Math.floor(Math.random() * responses.length)];\r\n            addMessage(randomResponse, false);\r\n        }, 1000);\r\n    };\r\n    \r\n    // Send button click\r\n    sendBtn?.addEventListener('click', sendMessage);\r\n    \r\n    // Enter key to send\r\n    chatInput?.addEventListener('keydown', (e) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            sendMessage();\r\n        }\r\n    });\r\n    \r\n    // Suggested prompts click\r\n    suggestedPrompts.forEach(btn => {\r\n        btn.addEventListener('click', () => {\r\n            const promptText = btn.textContent?.trim();\r\n            if (chatInput && promptText) {\r\n                chatInput.value = promptText;\r\n                chatInput.focus();\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * About page handler - generic page renderer\r\n */\r\nexport const aboutPage = async (params) => {\r\n    const route = Router.getCurrentRoute();\r\n    const template = templates[route] || templates.planning;\r\n    \r\n    await App.View.render(typeof template === 'function' ? template() : template, route);\r\n    \r\n    // Setup handlers based on route\r\n    if (route === 'auth') {\r\n        setupAuthHandlers();\r\n    } else if (route === 'profile') {\r\n        setupProfileHandlers();\r\n    } else if (route === 'ai-tools') {\r\n        setupChatHandlers();\r\n    }\r\n};\r\n","/**\r\n * OptiMine SPA - API Service\r\n * Handle all API calls to backend\r\n */\r\n\r\nimport { Config } from '../../config.js';\r\n\r\nconst BASE_URL = Config.api.baseUrl;\r\n\r\n/**\r\n * API Helper\r\n */\r\nconst api = {\r\n    /**\r\n     * Make HTTP request\r\n     * @param {string} endpoint \r\n     * @param {Object} options \r\n     * @returns {Promise}\r\n     */\r\n    async request(endpoint, options = {}) {\r\n        const url = `${BASE_URL}${endpoint}`;\r\n        const token = localStorage.getItem(Config.storage.token);\r\n        \r\n        const defaultHeaders = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        \r\n        if (token) {\r\n            defaultHeaders['Authorization'] = `Bearer ${token}`;\r\n        }\r\n        \r\n        const config = {\r\n            ...options,\r\n            headers: {\r\n                ...defaultHeaders,\r\n                ...options.headers\r\n            }\r\n        };\r\n        \r\n        try {\r\n            const response = await fetch(url, config);\r\n            const data = await response.json();\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(data.message || 'Request failed');\r\n            }\r\n            \r\n            return data;\r\n        } catch (error) {\r\n            console.error('API Error:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * GET request\r\n     */\r\n    get(endpoint) {\r\n        return this.request(endpoint, { method: 'GET' });\r\n    },\r\n\r\n    /**\r\n     * POST request\r\n     */\r\n    post(endpoint, body) {\r\n        return this.request(endpoint, {\r\n            method: 'POST',\r\n            body: JSON.stringify(body)\r\n        });\r\n    },\r\n\r\n    /**\r\n     * PUT request\r\n     */\r\n    put(endpoint, body) {\r\n        return this.request(endpoint, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(body)\r\n        });\r\n    },\r\n\r\n    /**\r\n     * DELETE request\r\n     */\r\n    delete(endpoint) {\r\n        return this.request(endpoint, { method: 'DELETE' });\r\n    }\r\n};\r\n\r\n/**\r\n * API Endpoints\r\n */\r\nexport const API = {\r\n    // Auth endpoints\r\n    auth: {\r\n        login: (credentials) => api.post('/auth/login', credentials),\r\n        register: (userData) => api.post('/auth/register', userData),\r\n        logout: () => api.post('/auth/logout'),\r\n        profile: () => api.get('/auth/profile')\r\n    },\r\n\r\n    // Mining data endpoints\r\n    mining: {\r\n        getAll: () => api.get('/mining'),\r\n        getById: (id) => api.get(`/mining/${id}`),\r\n        create: (data) => api.post('/mining', data),\r\n        update: (id, data) => api.put(`/mining/${id}`, data),\r\n        delete: (id) => api.delete(`/mining/${id}`)\r\n    },\r\n\r\n    // Production endpoints\r\n    production: {\r\n        getStats: () => api.get('/production/stats'),\r\n        getPlan: (params) => api.get(`/production/plan?${new URLSearchParams(params)}`),\r\n        optimize: (data) => api.post('/production/optimize', data)\r\n    },\r\n\r\n    // AI Assistant endpoints - Connected to n8n\r\n    ai: {\r\n        chat: async (message) => {\r\n            // Direct n8n webhook integration - Production URL (workflow must be Active)\r\n            const N8N_WEBHOOK_URL = 'https://n8n.optiminev.site/webhook/chatbot123';\r\n            \r\n            console.log('ð Sending to n8n:', N8N_WEBHOOK_URL);\r\n            console.log('Message:', message);\r\n            \r\n            try {\r\n                const response = await fetch(N8N_WEBHOOK_URL, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({\r\n                        chatInput: message,\r\n                        message: message,\r\n                        timestamp: new Date().toISOString(),\r\n                        userId: localStorage.getItem('user') || 'anonymous',\r\n                        language: document.documentElement.lang || 'id'\r\n                    })\r\n                });\r\n                \r\n                // Try to get response body even if status is not ok\r\n                let data;\r\n                try {\r\n                    const responseText = await response.text();\r\n                    console.log('ð¦ Raw response:', responseText);\r\n                    data = responseText ? JSON.parse(responseText) : {};\r\n                } catch (parseError) {\r\n                    console.error('Parse error:', parseError);\r\n                    data = {};\r\n                }\r\n                \r\n                console.log('â n8n response status:', response.status);\r\n                console.log('â n8n response data:', data);\r\n                \r\n                // Check if this is an n8n error message\r\n                if (data.code === 0 && data.message) {\r\n                    throw new Error(`n8n Error: ${data.message}`);\r\n                }\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                \r\n                // Return response in expected format\r\n                return {\r\n                    success: true,\r\n                    data: {\r\n                        response: data.output || data.text || data.response || data.message || JSON.stringify(data)\r\n                    }\r\n                };\r\n            } catch (error) {\r\n                console.error('â Error connecting to n8n:', error);\r\n                throw error;\r\n            }\r\n        },\r\n        recommend: (context) => api.post('/ai/recommend', context)\r\n    },\r\n\r\n    // Dashboard endpoints\r\n    dashboard: {\r\n        getSummary: () => api.get('/dashboard/summary'),\r\n        getCharts: () => api.get('/dashboard/charts'),\r\n        getAlerts: () => api.get('/dashboard/alerts')\r\n    }\r\n};\r\n\r\nexport default API;\r\n","/**\r\n * OptiMine SPA - AI Tools Page Component\r\n * Chatbot interface integrated with n8n AI\r\n */\r\n\r\nimport { API } from '../../data/api.js';\r\nimport { LanguageManager } from '../../utils/LanguageManager.js';\r\nimport { App } from '../../app.js';\r\n\r\nconst template = () => {\r\n        const t = (key) => LanguageManager.t(key);\r\n        \r\n        return `\r\n            <div class=\"min-h-screen bg-background\">\r\n                <!-- AI Tools Content -->\r\n                <div class=\"container mx-auto px-4 py-8\">\r\n                    <div class=\"max-w-4xl mx-auto\">\r\n                        <h1 class=\"text-3xl font-bold mb-2\">Asisten AI</h1>\r\n                        <p class=\"text-muted-foreground mb-8\">\r\n                            Ajukan pertanyaan tentang kondisi lapangan dan dapatkan rekomendasi AI\r\n                        </p>\r\n\r\n                        <!-- Chat Container -->\r\n                        <div class=\"bg-card border border-border rounded-xl overflow-hidden\">\r\n                            <!-- Chat Messages -->\r\n                            <div id=\"chat-messages\" class=\"h-[500px] overflow-y-auto p-6 space-y-4\">\r\n                                <!-- Welcome Message -->\r\n                                <div class=\"flex items-start gap-3\">\r\n                                    <div class=\"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center flex-shrink-0\">\r\n                                        <svg class=\"w-6 h-6 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                        </svg>\r\n                                    </div>\r\n                                    <div class=\"flex-1\">\r\n                                        <div class=\"bg-secondary/50 border border-border rounded-2xl rounded-bl-sm p-4\">\r\n                                            <p class=\"text-sm\">Halo! Saya Asisten AI Operasi Tambang Anda. Bagaimana saya bisa membantu mengoptimalkan operasi Anda hari ini?</p>\r\n                                        </div>\r\n                                        <span class=\"text-xs text-muted-foreground mt-1 block\">${new Date().toLocaleTimeString('id-ID', { hour: 'numeric', minute: '2-digit' })}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Typing Indicator (hidden by default) -->\r\n                            <div id=\"typing-indicator\" class=\"hidden px-6 pb-4\">\r\n                                <div class=\"flex items-center gap-2 text-muted-foreground text-sm\">\r\n                                    <div class=\"flex gap-1\">\r\n                                        <span class=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style=\"animation-delay: 0s\"></span>\r\n                                        <span class=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style=\"animation-delay: 0.2s\"></span>\r\n                                        <span class=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style=\"animation-delay: 0.4s\"></span>\r\n                                    </div>\r\n                                    <span>AI sedang mengetik...</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Input Area -->\r\n                            <div class=\"border-t border-border p-4 bg-background/50\">\r\n                                <form id=\"chat-form\" class=\"flex gap-2\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"chat-input\"\r\n                                        class=\"flex-1 px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                                        placeholder=\"Tanyakan tentang dampak cuaca, optimasi armada, atau perencanaan produksi...\"\r\n                                        autocomplete=\"off\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        id=\"send-btn\"\r\n                                        class=\"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        disabled\r\n                                    >\r\n                                        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n                                        </svg>\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- Status Indicator -->\r\n                        <div class=\"mt-4 flex items-center justify-center gap-2 text-sm\">\r\n                            <span class=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></span>\r\n                            <span class=\"text-muted-foreground\">AI Online - Terhubung ke n8n</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n};\r\n\r\nconst afterRender = () => {\r\n        console.log('ð¤ AI Tools Page - Initializing...');\r\n        \r\n        const chatMessages = document.getElementById('chat-messages');\r\n        const chatForm = document.getElementById('chat-form');\r\n        const chatInput = document.getElementById('chat-input');\r\n        const sendBtn = document.getElementById('send-btn');\r\n        const typingIndicator = document.getElementById('typing-indicator');\r\n\r\n        // Enable/disable send button based on input\r\n        chatInput.addEventListener('input', () => {\r\n            sendBtn.disabled = !chatInput.value.trim();\r\n        });\r\n\r\n        // Handle form submit\r\n        chatForm.addEventListener('submit', async (e) => {\r\n            e.preventDefault();\r\n            const message = chatInput.value.trim();\r\n            \r\n            if (!message) return;\r\n\r\n            // Add user message\r\n            addMessage(message, 'user');\r\n            \r\n            // Clear input\r\n            chatInput.value = '';\r\n            sendBtn.disabled = true;\r\n\r\n            // Show typing indicator\r\n            typingIndicator.classList.remove('hidden');\r\n            scrollToBottom();\r\n\r\n            try {\r\n                // Send to n8n via API\r\n                const response = await API.ai.chat(message);\r\n                \r\n                // Hide typing indicator\r\n                typingIndicator.classList.add('hidden');\r\n                \r\n                // Add AI response\r\n                if (response.success && response.data.response) {\r\n                    addMessage(response.data.response, 'ai');\r\n                } else {\r\n                    addMessage('Maaf, terjadi kesalahan. Silakan coba lagi.', 'ai');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error sending message:', error);\r\n                typingIndicator.classList.add('hidden');\r\n                addMessage('Maaf, saya tidak dapat terhubung ke AI server. Silakan coba lagi nanti.', 'ai');\r\n            }\r\n        });\r\n\r\n        // Focus input\r\n        chatInput.focus();\r\n\r\n        // Helper functions\r\n        function addMessage(content, type) {\r\n            const timestamp = new Date().toLocaleTimeString('id-ID', { hour: 'numeric', minute: '2-digit' });\r\n            const messageEl = document.createElement('div');\r\n            messageEl.className = 'flex items-start gap-3 animate-fade-in';\r\n\r\n            if (type === 'ai') {\r\n                messageEl.innerHTML = `\r\n                    <div class=\"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center flex-shrink-0\">\r\n                        <svg class=\"w-6 h-6 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                        </svg>\r\n                    </div>\r\n                    <div class=\"flex-1\">\r\n                        <div class=\"bg-secondary/50 border border-border rounded-2xl rounded-bl-sm p-4\">\r\n                            <p class=\"text-sm whitespace-pre-wrap\">${escapeHtml(content)}</p>\r\n                        </div>\r\n                        <span class=\"text-xs text-muted-foreground mt-1 block\">${timestamp}</span>\r\n                    </div>\r\n                `;\r\n            } else {\r\n                messageEl.innerHTML = `\r\n                    <div class=\"flex-1\"></div>\r\n                    <div class=\"flex-shrink-0 max-w-[70%]\">\r\n                        <div class=\"bg-primary text-white rounded-2xl rounded-br-sm p-4\">\r\n                            <p class=\"text-sm whitespace-pre-wrap\">${escapeHtml(content)}</p>\r\n                        </div>\r\n                        <span class=\"text-xs text-muted-foreground mt-1 block text-right\">${timestamp}</span>\r\n                    </div>\r\n                    <div class=\"w-10 h-10 rounded-lg bg-primary flex items-center justify-center flex-shrink-0\">\r\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n                        </svg>\r\n                    </div>\r\n                `;\r\n            }\r\n\r\n            chatMessages.appendChild(messageEl);\r\n            scrollToBottom();\r\n        }\r\n\r\n        function scrollToBottom() {\r\n            chatMessages.scrollTop = chatMessages.scrollHeight;\r\n        }\r\n\r\n        function escapeHtml(text) {\r\n            const div = document.createElement('div');\r\n            div.textContent = text;\r\n            return div.innerHTML;\r\n        }\r\n\r\n        console.log('â AI Tools Page - Ready!');\r\n};\r\n\r\nexport const aiToolsPage = async () => {\r\n    console.log('ð AI Tools Page - Loading...');\r\n    await App.View.render(template(), 'ai-tools');\r\n    console.log('â AI Tools Page - Rendered, initializing...');\r\n    afterRender();\r\n};\r\n","/**\r\n * OptiMine SPA - Router\r\n * Hash-based routing for SPA navigation\r\n */\r\n\r\nimport { Config } from '../../config.js';\r\nimport { EventBus } from '../utils/index.js';\r\nimport { homePage } from '../pages/home/home-page.js';\r\nimport { aboutPage } from '../pages/about/about-page.js';\r\nimport { aiToolsPage } from '../pages/ai-tools/ai-tools-page.js';\r\n\r\n// Routes registry\r\nconst routes = {};\r\n\r\n// Current route state\r\nlet currentRoute = null;\r\n\r\n/**\r\n * Router module\r\n */\r\nexport const Router = {\r\n    /**\r\n     * Initialize router\r\n     */\r\n    init() {\r\n        // Register default routes\r\n        this.register('home', homePage);\r\n        this.register('planning', aboutPage); // Temporary use aboutPage\r\n        this.register('ai-tools', aiToolsPage);\r\n        this.register('dashboard', aboutPage);\r\n        this.register('auth', aboutPage);\r\n        this.register('profile', aboutPage);\r\n        \r\n        // Listen for hash changes\r\n        window.addEventListener('hashchange', () => this.handleRouteChange());\r\n        \r\n        // Handle initial route\r\n        this.handleRouteChange();\r\n        \r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Register a route\r\n     * @param {string} path - Route path\r\n     * @param {Function} handler - Route handler function\r\n     */\r\n    register(path, handler) {\r\n        routes[path] = handler;\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Navigate to a route\r\n     * @param {string} path - Route path\r\n     */\r\n    navigate(path) {\r\n        window.location.hash = path;\r\n    },\r\n\r\n    /**\r\n     * Handle route change\r\n     */\r\n    async handleRouteChange() {\r\n        const hash = window.location.hash.slice(1) || Config.routes.default;\r\n        const [routePath, queryString] = hash.split('?');\r\n        \r\n        // Check if route is protected\r\n        if (Config.routes.protected.includes(routePath)) {\r\n            const isLoggedIn = localStorage.getItem(Config.storage.isLoggedIn) === 'true';\r\n            if (!isLoggedIn) {\r\n                this.navigate('auth');\r\n                return;\r\n            }\r\n        }\r\n        \r\n        // Get route handler\r\n        const handler = routes[routePath];\r\n        \r\n        if (handler) {\r\n            currentRoute = routePath;\r\n            \r\n            // Parse query params\r\n            const params = this.parseQuery(queryString);\r\n            \r\n            // Execute handler\r\n            await handler(params);\r\n            \r\n            // Update active nav\r\n            this.updateActiveNav(routePath);\r\n        } else {\r\n            // 404 - redirect to home\r\n            this.navigate(Config.routes.default);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Parse query string\r\n     * @param {string} queryString \r\n     * @returns {Object}\r\n     */\r\n    parseQuery(queryString) {\r\n        if (!queryString) return {};\r\n        \r\n        const params = {};\r\n        const pairs = queryString.split('&');\r\n        \r\n        pairs.forEach(pair => {\r\n            const [key, value] = pair.split('=');\r\n            params[decodeURIComponent(key)] = decodeURIComponent(value || '');\r\n        });\r\n        \r\n        return params;\r\n    },\r\n\r\n    /**\r\n     * Update active navigation link\r\n     * @param {string} route \r\n     */\r\n    updateActiveNav(route) {\r\n        // Desktop nav\r\n        document.querySelectorAll('.spa-nav-link').forEach(link => {\r\n            const linkRoute = link.getAttribute('href')?.replace('#', '');\r\n            link.classList.toggle('active', linkRoute === route);\r\n        });\r\n        \r\n        // Mobile nav\r\n        document.querySelectorAll('.spa-mobile-nav-link').forEach(link => {\r\n            const linkRoute = link.getAttribute('href')?.replace('#', '');\r\n            link.classList.toggle('active', linkRoute === route);\r\n        });\r\n        \r\n        // Close mobile menu\r\n        const mobileMenu = document.getElementById('mobile-menu');\r\n        mobileMenu?.classList.add('hidden');\r\n        \r\n        // Emit event\r\n        EventBus.emit('routeChanged', route);\r\n    },\r\n\r\n    /**\r\n     * Get current route\r\n     * @returns {string}\r\n     */\r\n    getCurrentRoute() {\r\n        return currentRoute;\r\n    }\r\n};\r\n","/**\r\n * OptiMine SPA - Main Application\r\n * MVP Architecture: Presenter Layer\r\n */\r\n\r\nimport { Config } from '../config.js';\r\nimport { Router } from './routes/routes.js';\r\nimport { EventBus } from './utils/index.js';\r\n\r\n// ============================================\r\n// MODEL - State Management\r\n// ============================================\r\nconst Model = {\r\n    state: {\r\n        user: null,\r\n        isAuthenticated: false,\r\n        theme: Config.defaults.theme,\r\n        language: Config.defaults.language,\r\n        currentRoute: null,\r\n        isLoading: false\r\n    },\r\n\r\n    init() {\r\n        // Load persisted state\r\n        this.state.theme = localStorage.getItem(Config.storage.theme) || Config.defaults.theme;\r\n        this.state.language = localStorage.getItem(Config.storage.language) || Config.defaults.language;\r\n        this.state.isAuthenticated = localStorage.getItem(Config.storage.isLoggedIn) === 'true';\r\n        \r\n        const savedUser = localStorage.getItem(Config.storage.user);\r\n        if (savedUser) {\r\n            try {\r\n                this.state.user = JSON.parse(savedUser);\r\n            } catch (e) {\r\n                this.state.user = null;\r\n            }\r\n        }\r\n        \r\n        return this;\r\n    },\r\n\r\n    getState(key) {\r\n        return key ? this.state[key] : this.state;\r\n    },\r\n\r\n    setState(key, value) {\r\n        this.state[key] = value;\r\n        EventBus.emit('stateChanged', { key, value });\r\n        return this;\r\n    },\r\n\r\n    // Auth methods\r\n    login(user) {\r\n        this.state.user = user;\r\n        this.state.isAuthenticated = true;\r\n        localStorage.setItem(Config.storage.user, JSON.stringify(user));\r\n        localStorage.setItem(Config.storage.isLoggedIn, 'true');\r\n        EventBus.emit('authChanged', { isAuthenticated: true, user });\r\n        return this;\r\n    },\r\n\r\n    logout() {\r\n        this.state.user = null;\r\n        this.state.isAuthenticated = false;\r\n        localStorage.removeItem(Config.storage.user);\r\n        localStorage.removeItem(Config.storage.token);\r\n        localStorage.setItem(Config.storage.isLoggedIn, 'false');\r\n        EventBus.emit('authChanged', { isAuthenticated: false, user: null });\r\n        return this;\r\n    },\r\n\r\n    // Theme methods\r\n    setTheme(theme) {\r\n        this.state.theme = theme;\r\n        localStorage.setItem(Config.storage.theme, theme);\r\n        document.documentElement.classList.toggle('dark', theme === 'dark');\r\n        EventBus.emit('themeChanged', theme);\r\n        return this;\r\n    },\r\n\r\n    toggleTheme() {\r\n        const newTheme = this.state.theme === 'dark' ? 'light' : 'dark';\r\n        return this.setTheme(newTheme);\r\n    },\r\n\r\n    // Language methods\r\n    setLanguage(lang) {\r\n        this.state.language = lang;\r\n        localStorage.setItem(Config.storage.language, lang);\r\n        EventBus.emit('languageChanged', lang);\r\n        return this;\r\n    }\r\n};\r\n\r\n// ============================================\r\n// VIEW - DOM Manipulation\r\n// ============================================\r\nconst View = {\r\n    elements: {\r\n        content: null,\r\n        navbar: null,\r\n        toastContainer: null\r\n    },\r\n\r\n    init() {\r\n        this.elements.content = document.getElementById('spa-content');\r\n        this.elements.navbar = document.getElementById('header');\r\n        this.elements.toastContainer = document.getElementById('toast-container');\r\n        \r\n        // Apply initial theme\r\n        document.documentElement.classList.toggle('dark', Model.getState('theme') === 'dark');\r\n        \r\n        return this;\r\n    },\r\n\r\n    // Render content with smooth CSS animation (no overlay)\r\n    async render(html, routeName) {\r\n        // Ensure content element is available\r\n        if (!this.elements.content) {\r\n            this.elements.content = document.getElementById('spa-content');\r\n        }\r\n        \r\n        const { content } = this.elements;\r\n        \r\n        if (!content) {\r\n            console.error('SPA content element not found');\r\n            return;\r\n        }\r\n        \r\n        // Check if this is initial render (content is empty)\r\n        const isInitialRender = content.innerHTML.trim() === '';\r\n        \r\n        if (!isInitialRender) {\r\n            // Start exit animation (fade out) only if not initial render\r\n            content.classList.add('page-exit');\r\n            content.classList.add('page-exit-active');\r\n            \r\n            await this.delay(200); // Exit animation duration\r\n        }\r\n        \r\n        // Update content\r\n        content.innerHTML = html;\r\n        \r\n        // Remove exit classes\r\n        content.classList.remove('page-exit', 'page-exit-active');\r\n        \r\n        // Start enter animation (fade in + slide up)\r\n        content.classList.add('page-enter');\r\n        \r\n        // Force reflow\r\n        void content.offsetWidth;\r\n        \r\n        content.classList.add('page-enter-active');\r\n        \r\n        // Notify route changed\r\n        EventBus.emit('routeChanged', routeName);\r\n        \r\n        await this.delay(500); // Enter animation duration\r\n        \r\n        // Cleanup\r\n        content.classList.remove('page-enter', 'page-enter-active');\r\n        \r\n        // Re-init icons\r\n        if (window.lucide) {\r\n            window.lucide.createIcons();\r\n        }\r\n    },\r\n\r\n    // Update auth UI\r\n    updateAuthUI(isAuthenticated, user) {\r\n        const authBtn = document.getElementById('nav-auth-btn');\r\n        const userMenu = document.getElementById('nav-user-menu');\r\n        const userInitial = document.getElementById('nav-user-initial');\r\n        const userName = document.getElementById('nav-user-name');\r\n        const userEmail = document.getElementById('nav-user-email');\r\n\r\n        if (isAuthenticated && user) {\r\n            authBtn?.classList.add('hidden');\r\n            userMenu?.classList.remove('hidden');\r\n            if (userInitial) userInitial.textContent = (user.name || 'U').charAt(0).toUpperCase();\r\n            if (userName) userName.textContent = user.name || 'User';\r\n            if (userEmail) userEmail.textContent = user.email || '';\r\n        } else {\r\n            authBtn?.classList.remove('hidden');\r\n            userMenu?.classList.add('hidden');\r\n        }\r\n    },\r\n\r\n    // Show toast notification\r\n    showToast(message, type = 'info', duration = 3000) {\r\n        const container = this.elements.toastContainer;\r\n        if (!container) return;\r\n\r\n        const icons = {\r\n            success: 'check-circle',\r\n            error: 'x-circle',\r\n            warning: 'alert-triangle',\r\n            info: 'info'\r\n        };\r\n\r\n        const toast = document.createElement('div');\r\n        toast.className = `spa-toast ${type}`;\r\n        toast.innerHTML = `\r\n            <i data-lucide=\"${icons[type]}\" class=\"spa-toast-icon\"></i>\r\n            <span class=\"spa-toast-message\">${message}</span>\r\n        `;\r\n\r\n        container.appendChild(toast);\r\n        \r\n        if (window.lucide) {\r\n            window.lucide.createIcons();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            toast.classList.add('exiting');\r\n            setTimeout(() => toast.remove(), 300);\r\n        }, duration);\r\n    },\r\n\r\n    // Utility delay\r\n    delay(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n};\r\n\r\n// ============================================\r\n// PRESENTER - Business Logic\r\n// ============================================\r\nconst Presenter = {\r\n    init() {\r\n        this.setupEventListeners();\r\n        return this;\r\n    },\r\n\r\n    setupEventListeners() {\r\n        // Auth state changes\r\n        EventBus.on('authChanged', ({ isAuthenticated, user }) => {\r\n            View.updateAuthUI(isAuthenticated, user);\r\n            if (!isAuthenticated) {\r\n                Router.navigate('home');\r\n            }\r\n        });\r\n\r\n        // Theme changes\r\n        EventBus.on('themeChanged', (theme) => {\r\n            console.log('Theme changed:', theme);\r\n        });\r\n    },\r\n\r\n    // Handle login\r\n    async handleLogin(email, password) {\r\n        try {\r\n            // Call real API\r\n            const response = await fetch('http://localhost:5000/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ email, password })\r\n            });\r\n\r\n            const result = await response.json();\r\n\r\n            if (!response.ok || result.error) {\r\n                throw new Error(result.message || 'Login gagal');\r\n            }\r\n\r\n            const user = {\r\n                id: result.data.id,\r\n                name: result.data.nama,\r\n                email: email,\r\n                role: result.data.role,\r\n                token: result.data.token\r\n            };\r\n            \r\n            // Save token to localStorage\r\n            localStorage.setItem('optimine-token', result.data.token);\r\n            \r\n            Model.login(user);\r\n            View.showToast('Login berhasil!', 'success');\r\n            \r\n            setTimeout(() => {\r\n                Router.navigate('home');\r\n            }, 500);\r\n            \r\n            return true;\r\n        } catch (error) {\r\n            View.showToast('Login gagal: ' + error.message, 'error');\r\n            return false;\r\n        }\r\n    },\r\n\r\n    // Handle register\r\n    async handleRegister(name, email, password, role) {\r\n        try {\r\n            // Call real API for registration\r\n            const registerResponse = await fetch('http://localhost:5000/register', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ \r\n                    nama: name, \r\n                    email, \r\n                    password, \r\n                    role: role || 'admin'\r\n                })\r\n            });\r\n\r\n            const registerResult = await registerResponse.json();\r\n            console.log('Register response:', registerResult);\r\n\r\n            if (!registerResponse.ok || registerResult.error) {\r\n                throw new Error(registerResult.message || 'Registrasi gagal');\r\n            }\r\n\r\n            // Auto login after successful registration\r\n            const loginResponse = await fetch('http://localhost:5000/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ email, password })\r\n            });\r\n\r\n            const loginResult = await loginResponse.json();\r\n\r\n            if (loginResponse.ok && !loginResult.error) {\r\n                const user = {\r\n                    id: loginResult.data.id,\r\n                    name: loginResult.data.nama,\r\n                    email: email,\r\n                    role: loginResult.data.role,\r\n                    token: loginResult.data.token\r\n                };\r\n                \r\n                // Save token to localStorage\r\n                localStorage.setItem('optimine-token', loginResult.data.token);\r\n                \r\n                Model.login(user);\r\n            } else {\r\n                // If auto-login fails, just create user object from registration data\r\n                const user = {\r\n                    id: Date.now(),\r\n                    name: name,\r\n                    email: email,\r\n                    role: role || 'admin'\r\n                };\r\n                Model.login(user);\r\n            }\r\n            \r\n            View.showToast('Registrasi berhasil!', 'success');\r\n            \r\n            setTimeout(() => {\r\n                Router.navigate('home');\r\n            }, 500);\r\n            \r\n            return true;\r\n        } catch (error) {\r\n            View.showToast('Registrasi gagal: ' + error.message, 'error');\r\n            return false;\r\n        }\r\n    },\r\n\r\n    // Handle logout\r\n    handleLogout() {\r\n        Model.logout();\r\n        View.showToast('Logout berhasil', 'info');\r\n    }\r\n};\r\n\r\n// ============================================\r\n// APP - Main Application\r\n// ============================================\r\nexport const App = {\r\n    Model,\r\n    View,\r\n    Presenter,\r\n\r\n    init() {\r\n        Model.init();\r\n        View.init();\r\n        Presenter.init();\r\n        \r\n        // Update auth UI on init\r\n        View.updateAuthUI(Model.getState('isAuthenticated'), Model.getState('user'));\r\n        \r\n        console.log('App initialized');\r\n        return this;\r\n    }\r\n};\r\n\r\n// Export individual modules\r\nexport { Model, View, Presenter };\r\n","/**\r\n * OptiMine SPA - Main Entry Point\r\n * Using Webpack bundler with MVP Architecture\r\n */\r\n\r\nimport { App } from './scripts/app.js';\r\nimport { Router } from './scripts/routes/routes.js';\r\nimport { EventBus, LanguageManager } from './scripts/utils/index.js';\r\nimport { t, getSection } from './scripts/utils/translations.js';\r\nimport './styles/styles.css';\r\n\r\n/**\r\n * Update UI text based on current language\r\n */\r\nconst updateLanguageUI = (lang) => {\r\n    const nav = getSection(lang, 'nav');\r\n    \r\n    // Update Desktop Navigation Links\r\n    document.querySelectorAll('.nav-link[data-page]').forEach(link => {\r\n        const page = link.dataset.page;\r\n        const span = link.querySelector('span');\r\n        if (span) {\r\n            if (page === 'home') span.textContent = nav.home;\r\n            if (page === 'planning') span.textContent = nav.planning;\r\n            if (page === 'ai-tools') span.textContent = nav.aiTools;\r\n            if (page === 'dashboard') span.textContent = nav.dashboard;\r\n        }\r\n    });\r\n    \r\n    // Update Mobile Navigation Links\r\n    document.querySelectorAll('.mobile-nav-link[data-page]').forEach(link => {\r\n        const page = link.dataset.page;\r\n        const span = link.querySelector('span');\r\n        if (span) {\r\n            if (page === 'home') span.textContent = nav.home;\r\n            if (page === 'planning') span.textContent = nav.planning;\r\n            if (page === 'ai-tools') span.textContent = nav.aiTools;\r\n            if (page === 'dashboard') span.textContent = nav.dashboard;\r\n        }\r\n    });\r\n    \r\n    // Update Login/Profile button text\r\n    const loginBtnText = document.querySelector('#loginBtn span');\r\n    const mobileLoginBtnText = document.querySelector('#mobileLoginBtn span');\r\n    if (loginBtnText) loginBtnText.textContent = nav.login;\r\n    if (mobileLoginBtnText) mobileLoginBtnText.textContent = nav.login;\r\n    \r\n    // Update active language indicator in dropdown\r\n    document.querySelectorAll('.lang-option').forEach(btn => {\r\n        const isActive = btn.dataset.lang === lang;\r\n        btn.classList.toggle('bg-primary', isActive);\r\n        btn.classList.toggle('text-primary-foreground', isActive);\r\n        btn.classList.toggle('shadow-lg', isActive);\r\n        // Remove hover effect for active\r\n        if (isActive) {\r\n            btn.classList.remove('hover:bg-primary/10');\r\n        } else {\r\n            btn.classList.add('hover:bg-primary/10');\r\n        }\r\n    });\r\n    \r\n    document.querySelectorAll('.lang-option-mobile').forEach(btn => {\r\n        const isActive = btn.dataset.lang === lang;\r\n        btn.classList.toggle('bg-primary', isActive);\r\n        btn.classList.toggle('text-primary-foreground', isActive);\r\n        btn.classList.toggle('bg-secondary/50', !isActive);\r\n    });\r\n};\r\n\r\n/**\r\n * Setup Navbar Event Handlers\r\n */\r\nconst setupNavbarHandlers = () => {\r\n    // Theme Toggle\r\n    const themeToggle = document.getElementById('theme-toggle');\r\n    themeToggle?.addEventListener('click', () => {\r\n        App.Model.toggleTheme();\r\n    });\r\n    \r\n    // Language Dropdown\r\n    const langToggle = document.getElementById('lang-toggle');\r\n    const langDropdown = document.getElementById('lang-dropdown');\r\n    \r\n    langToggle?.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        langDropdown?.classList.toggle('hidden');\r\n    });\r\n    \r\n    // Language Options (Desktop)\r\n    document.querySelectorAll('.lang-option').forEach(btn => {\r\n        btn.addEventListener('click', () => {\r\n            const lang = btn.dataset.lang;\r\n            App.Model.setLanguage(lang);\r\n            langDropdown?.classList.add('hidden');\r\n            updateLanguageUI(lang);\r\n            // Re-render current page to apply translations\r\n            Router.handleRouteChange();\r\n        });\r\n    });\r\n    \r\n    // Mobile Language Options\r\n    document.querySelectorAll('.lang-option-mobile').forEach(btn => {\r\n        btn.addEventListener('click', () => {\r\n            const lang = btn.dataset.lang;\r\n            App.Model.setLanguage(lang);\r\n            updateLanguageUI(lang);\r\n            // Re-render current page to apply translations\r\n            Router.handleRouteChange();\r\n        });\r\n    });\r\n    \r\n    // Mobile Menu Toggle\r\n    const mobileMenuBtn = document.getElementById('mobile-menu-btn');\r\n    const mobileMenu = document.getElementById('mobile-menu');\r\n    const menuIcon = document.getElementById('menu-icon');\r\n    const closeIcon = document.getElementById('close-icon');\r\n    \r\n    mobileMenuBtn?.addEventListener('click', () => {\r\n        const isOpen = !mobileMenu?.classList.contains('hidden');\r\n        mobileMenu?.classList.toggle('hidden', isOpen);\r\n        menuIcon?.classList.toggle('hidden', !isOpen);\r\n        closeIcon?.classList.toggle('hidden', isOpen);\r\n    });\r\n    \r\n    // Close mobile menu when clicking nav links\r\n    document.querySelectorAll('.mobile-nav-link').forEach(link => {\r\n        link.addEventListener('click', () => {\r\n            mobileMenu?.classList.add('hidden');\r\n            menuIcon?.classList.remove('hidden');\r\n            closeIcon?.classList.add('hidden');\r\n        });\r\n    });\r\n    \r\n    // Close language dropdown when clicking outside\r\n    document.addEventListener('click', (e) => {\r\n        if (!langToggle?.contains(e.target) && !langDropdown?.contains(e.target)) {\r\n            langDropdown?.classList.add('hidden');\r\n        }\r\n    });\r\n    \r\n    // Apply initial language\r\n    const currentLang = App.Model.getState('language') || 'id';\r\n    updateLanguageUI(currentLang);\r\n};\r\n\r\n/**\r\n * Update Navigation Active State\r\n */\r\nconst updateNavActiveState = (route) => {\r\n    // Desktop nav links\r\n    document.querySelectorAll('.nav-link').forEach(link => {\r\n        const page = link.dataset.page;\r\n        link.classList.toggle('active', page === route);\r\n    });\r\n    \r\n    // Mobile nav links\r\n    document.querySelectorAll('.mobile-nav-link').forEach(link => {\r\n        const page = link.dataset.page;\r\n        link.classList.toggle('active', page === route);\r\n    });\r\n};\r\n\r\n/**\r\n * Update Auth UI State\r\n */\r\nconst updateAuthUI = () => {\r\n    const isLoggedIn = App.Model.getState('isAuthenticated');\r\n    const user = App.Model.getState('user');\r\n    \r\n    const loginBtn = document.getElementById('loginBtn');\r\n    const profileBtn = document.getElementById('profileBtn');\r\n    const mobileLoginBtn = document.getElementById('mobileLoginBtn');\r\n    const mobileProfileBtn = document.getElementById('mobileProfileBtn');\r\n    \r\n    if (isLoggedIn && user) {\r\n        loginBtn?.classList.add('hidden');\r\n        profileBtn?.classList.remove('hidden');\r\n        profileBtn?.classList.add('flex');\r\n        mobileLoginBtn?.classList.add('hidden');\r\n        mobileProfileBtn?.classList.remove('hidden');\r\n        mobileProfileBtn?.classList.add('flex');\r\n        \r\n        // Update user info\r\n        const initial = (user.name || 'U').charAt(0).toUpperCase();\r\n        document.querySelectorAll('.user-initial').forEach(el => el.textContent = initial);\r\n        document.querySelectorAll('.user-name').forEach(el => el.textContent = user.name || 'User');\r\n    } else {\r\n        loginBtn?.classList.remove('hidden');\r\n        loginBtn?.classList.add('flex');\r\n        profileBtn?.classList.add('hidden');\r\n        profileBtn?.classList.remove('flex');\r\n        mobileLoginBtn?.classList.remove('hidden');\r\n        mobileLoginBtn?.classList.add('flex');\r\n        mobileProfileBtn?.classList.add('hidden');\r\n        mobileProfileBtn?.classList.remove('flex');\r\n    }\r\n};\r\n\r\n/**\r\n * Show Toast Notification\r\n */\r\nconst showToast = (message, type = 'info', duration = 3000) => {\r\n    const container = document.getElementById('toast-container');\r\n    if (!container) return;\r\n    \r\n    const icons = {\r\n        success: `<svg class=\"w-5 h-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>`,\r\n        error: `<svg class=\"w-5 h-5 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>`,\r\n        info: `<svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>`\r\n    };\r\n    \r\n    const toast = document.createElement('div');\r\n    toast.className = `toast ${type}`;\r\n    toast.innerHTML = `${icons[type] || icons.info}<span>${message}</span>`;\r\n    \r\n    container.appendChild(toast);\r\n    \r\n    setTimeout(() => {\r\n        toast.style.opacity = '0';\r\n        toast.style.transform = 'translateX(100%)';\r\n        toast.style.transition = 'all 0.3s ease';\r\n        setTimeout(() => toast.remove(), 300);\r\n    }, duration);\r\n};\r\n\r\n// Make showToast globally available\r\nwindow.showToast = showToast;\r\n\r\n// Make translation function globally available\r\nwindow.t = t;\r\nwindow.getSection = getSection;\r\nwindow.updateLanguageUI = updateLanguageUI;\r\n\r\n// Make LanguageManager globally available\r\nwindow.LanguageManager = LanguageManager;\r\n\r\n// Initialize app when DOM ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    // Initialize App FIRST (before Router)\r\n    App.init();\r\n    \r\n    // Initialize LanguageManager\r\n    LanguageManager.init();\r\n    \r\n    // Setup Navbar Handlers\r\n    setupNavbarHandlers();\r\n    \r\n    // Update Auth UI\r\n    updateAuthUI();\r\n    \r\n    // Listen for route changes\r\n    EventBus.on('routeChanged', updateNavActiveState);\r\n    \r\n    // Listen for auth changes\r\n    EventBus.on('authChanged', updateAuthUI);\r\n    \r\n    // Listen for language changes - re-render current page\r\n    EventBus.on('languageChanged', (lang) => {\r\n        updateLanguageUI(lang);\r\n        // Re-render current page to update content\r\n        const currentRoute = Router.getCurrentRoute();\r\n        if (currentRoute) {\r\n            Router.navigate(currentRoute);\r\n        }\r\n    });\r\n    \r\n    // Subscribe LanguageManager to re-render on language change\r\n    LanguageManager.subscribe((lang) => {\r\n        const currentRoute = Router.getCurrentRoute();\r\n        if (currentRoute) {\r\n            Router.navigate(currentRoute);\r\n        }\r\n    });\r\n    \r\n    // Initialize Router LAST (so it can render initial route)\r\n    Router.init();\r\n    \r\n    console.log('OptiMine SPA initialized');\r\n});\r\n\r\n// Export for global access if needed\r\nwindow.OptiMine = {\r\n    App,\r\n    Router,\r\n    showToast\r\n};\r\n"],"names":["Config","appName","version","api","baseUrl","timeout","routes","default","protected","public","transition","duration","type","storage","theme","language","user","token","isLoggedIn","defaults","translations","en","nav","home","planning","aiTools","dashboard","login","profile","logout","welcomeBack","subtitle","activeSites","fleetUnits","efficiency","quickAccess","aiScenario","aiScenarioDesc","aiChatbot","aiChatbotDesc","opsDashboard","opsDashboardDesc","accessDashboard","aiPoweredAnalysis","realtimeMonitoring","riskMitigation","costOptimization","title","weatherConditions","rainfallLevel","low","high","waveHeight","calm","rough","fleetStatus","activeVehicles","maintenanceStatus","fleetAvailability","truckCount","excavatorCount","shipSchedule","vesselName","estimatedArrival","cargoCapacity","addVessel","generatePlan","systemStatus","aiSystemOnline","n8nReady","activeAlerts","alertRainfall","alertMaintenance","weatherData","connected","fleetTracking","online","aiEngine","ready","lastUpdate","justNow","active","aiOnline","responseTime","suggestedPrompts","prompt1","prompt2","prompt3","integration","integrationDesc","connectedSystems","weather","fleet","shipping","placeholder","greeting","totalProduction","fromLastMonth","activeEquipment","outOfTotal","efficiencyRate","target","costSavings","thisQuarter","productionTrends","equipmentStatus","chartPlaceholder","statusPlaceholder","auth","register","email","password","confirmPassword","fullName","role","forgotPassword","signIn","createAccount","resetPassword","resetDesc","sendResetLink","backToLogin","miningPlanner","shippingPlanner","passwordRequirements","minLength","uppercase","number","weak","medium","fair","strong","passwordError","passwordMismatch","accountInfo","displayName","preferences","darkMode","useDarkTheme","selectLanguage","signOut","dark","light","common","loading","error","success","save","cancel","confirm","delete","edit","view","search","noData","languageChanged","copyright","privacy","terms","contact","id","getSection","lang","section","constructor","this","currentLanguage","getSavedLanguage","listeners","isInitialized","saved","localStorage","getItem","navigator","toLowerCase","startsWith","init","setLanguage","setupLanguageSwitcher","console","log","t","translate","path","keys","split","result","key","undefined","warn","notify","setItem","document","documentElement","setAttribute","updateAllTranslations","updateLanguageIndicator","notifyListeners","toggleLanguage","newLang","querySelectorAll","forEach","element","getAttribute","translation","textContent","indicator","toUpperCase","button","isActive","classList","toggle","btn","dataset","addEventListener","e","closest","preventDefault","langBtn","langOption","subscribe","callback","push","filter","cb","$","EventBus","events","on","event","off","emit","data","once","wrapper","animate","fadeIn","style","opacity","display","start","step","timestamp","progress","Math","min","requestAnimationFrame","fadeOut","slideDown","height","overflow","targetHeight","scrollHeight","slideUp","startHeight","typewriter","text","speed","borderRight","animation","index","length","charAt","setTimeout","typewriterWelcome","welcomeText","userName","innerHTML","welcomeSpan","createElement","className","userSpan","appendChild","add","welcomeIndex","userIndex","typeWelcome","typeUser","remove","countUp","suffix","startTime","performance","now","updateCount","currentTime","elapsed","easedProgress","pow","currentValue","floor","initStatCounters","delay","parseInt","initTypewriter","welcomeElement","getElementById","userData","JSON","parse","name","nama","getUserName","homePage","async","App","View","render","Model","getState","template","templates","p","ai","d","a","pr","aboutPage","params","route","Router","getCurrentRoute","loginTab","registerTab","loginForm","registerForm","authCard","forgotPasswordCard","forgotPasswordBtn","backToLoginBtn","forgotPasswordForm","loginFormClone","cloneNode","replaceWith","registerFormClone","registerPassword","passwordInfoContainer","strengthContainer","strengthText","strengthBars","reqTitle","reqLength","reqUppercase","reqNumber","getAuthTranslations","window","updateRequirement","isValid","updateStrengthUI","strength","config","bar","label","querySelector","initPasswordRequirements","value","checks","test","special","lowercase","checkPasswordStrength","submitBtn","originalText","disabled","Presenter","handleLogin","hasMinLength","hasUppercase","hasNumber","handleRegister","Promise","resolve","alert","setupAuthHandlers","logoutBtn","themeToggle","langBtns","logoutBtnClone","themeToggleClone","handleLogout","toggleTheme","dot","isDark","handleRouteChange","setupProfileHandlers","chatInput","sendBtn","messagesContainer","addMessage","content","isUser","time","Date","toLocaleTimeString","hour","minute","messageHTML","insertAdjacentHTML","scrollTop","sendMessage","message","trim","responses","randomResponse","random","shiftKey","promptText","focus","setupChatHandlers","BASE_URL","request","endpoint","options","url","defaultHeaders","headers","response","fetch","json","ok","Error","get","method","post","body","stringify","put","API","chat","N8N_WEBHOOK_URL","toISOString","userId","responseText","parseError","status","code","output","recommend","context","aiToolsPage","chatMessages","chatForm","typingIndicator","messageEl","escapeHtml","scrollToBottom","div","afterRender","currentRoute","handler","navigate","location","hash","slice","routePath","queryString","includes","parseQuery","updateActiveNav","pair","decodeURIComponent","link","linkRoute","replace","mobileMenu","state","isAuthenticated","isLoading","savedUser","setState","removeItem","setTheme","newTheme","elements","navbar","toastContainer","html","routeName","offsetWidth","lucide","createIcons","updateAuthUI","authBtn","userMenu","userInitial","userEmail","showToast","container","toast","warning","info","ms","setupEventListeners","registerResponse","registerResult","loginResponse","loginResult","updateLanguageUI","page","span","loginBtnText","mobileLoginBtnText","updateNavActiveState","loginBtn","profileBtn","mobileLoginBtn","mobileProfileBtn","initial","el","icons","transform","LanguageManager","langToggle","langDropdown","stopPropagation","mobileMenuBtn","menuIcon","closeIcon","isOpen","contains","currentLang","setupNavbarHandlers","OptiMine"],"ignoreList":[],"sourceRoot":""}