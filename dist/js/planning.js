const PlanningPage={state:{rainfallLevel:50,waveHeight:40,activeVehicles:25,maintenanceStatus:3,vessels:[{id:"A",time:"08:00",status:"active"},{id:"B",time:"14:00",status:"active"},{id:"C",time:"20:00",status:"active"}]},init(){this.setupSliders(),this.setupInputs(),this.setupGenerateButton(),this.updateSliderFill()},setupSliders(){const e=document.getElementById("rainfall-slider"),t=document.getElementById("wave-slider");e&&(e.addEventListener("input",e=>{this.state.rainfallLevel=parseInt(e.target.value),this.updateSliderFill(e.target),this.onStateChange()}),this.updateSliderFill(e)),t&&(t.addEventListener("input",e=>{this.state.waveHeight=parseInt(e.target.value),this.updateSliderFill(e.target),this.onStateChange()}),this.updateSliderFill(t))},updateSliderFill(e){if(!e)return void document.querySelectorAll(".custom-slider").forEach(e=>this.updateSliderFill(e));const t=e.value,n=e.min||0,a=(t-n)/((e.max||100)-n)*100,i=getComputedStyle(document.documentElement).getPropertyValue("--primary").trim();e.style.background=`linear-gradient(to right, \n            hsl(${i||"199 89% 48%"}) 0%, \n            hsl(${i||"199 89% 48%"}) ${a}%, \n            hsl(var(--secondary)) ${a}%, \n            hsl(var(--secondary)) 100%)`},setupInputs(){const e=document.getElementById("active-vehicles"),t=document.getElementById("maintenance-status");e&&(e.addEventListener("change",e=>{this.state.activeVehicles=parseInt(e.target.value)||0,this.onStateChange()}),e.addEventListener("focus",e=>{e.target.select()})),t&&(t.addEventListener("change",e=>{this.state.maintenanceStatus=parseInt(e.target.value)||0,this.onStateChange()}),t.addEventListener("focus",e=>{e.target.select()}))},setupGenerateButton(){const e=document.getElementById("generate-btn");e&&e.addEventListener("click",()=>{this.generateOptimizationPlan()})},async generateOptimizationPlan(){const e=document.getElementById("generate-btn");e&&(e.disabled=!0,e.innerHTML='\n                <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                </svg>\n                <span>Generating Plan...</span>\n            ');try{await this.simulateAPICall(),window.OptiMine&&window.OptiMine.Toast&&window.OptiMine.Toast.success("Optimization plan generated successfully!"),console.log("Generated plan with state:",this.state)}catch(e){console.error("Error generating plan:",e),window.OptiMine&&window.OptiMine.Toast&&window.OptiMine.Toast.error("Failed to generate optimization plan")}finally{e&&(e.disabled=!1,e.innerHTML='\n                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />\n                    </svg>\n                    <span>Generate Optimization Plan</span>\n                ')}},simulateAPICall:()=>new Promise(e=>{setTimeout(()=>{e({success:!0,data:{recommendedOutput:"1200 tons",fleetUtilization:"85%",estimatedCost:"$45,000"}})},2e3)}),onStateChange(){window.dispatchEvent(new CustomEvent("planning:statechange",{detail:{state:this.state}})),console.log("Planning state updated:",this.state)},getState(){return{...this.state}},setState(e){this.state={...this.state,...e};const t=document.getElementById("rainfall-slider"),n=document.getElementById("wave-slider"),a=document.getElementById("active-vehicles"),i=document.getElementById("maintenance-status");t&&void 0!==e.rainfallLevel&&(t.value=e.rainfallLevel,this.updateSliderFill(t)),n&&void 0!==e.waveHeight&&(n.value=e.waveHeight,this.updateSliderFill(n)),a&&void 0!==e.activeVehicles&&(a.value=e.activeVehicles),i&&void 0!==e.maintenanceStatus&&(i.value=e.maintenanceStatus)}};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("generate-btn")&&(PlanningPage.init(),window.addEventListener("themechange",()=>{PlanningPage.updateSliderFill()}))}),window.PlanningPage=PlanningPage;